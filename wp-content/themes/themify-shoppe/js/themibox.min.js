'use strict';var Themibox={};
(function(a){Themibox={topOffset:"50%",init:function(c){this.lightboxOpen=this.isFrameLoading=!1;a("body").hasClass("iphone")&&window.addEventListener("orientationchange",this.doOnOrientationChange);this.config=c;this.bindEvents();this.setupLightbox()},doOnOrientationChange:function(){a("body").hasClass("post-lightbox")&&window.setTimeout(function(){Themibox.topOffset=a(window).scrollTop();a("#post-lightbox-wrap").animate({top:Themibox.topOffset},300)},300)},bindEvents:function(){var c=a("body");
c.on("click",".themify-lightbox",this.clickLightBox).on("click",".close-lightbox",this.closeLightBox);a(document).keyup(this.keyUp);a("<div/>",{id:"pattern"}).appendTo(c).on("click",this.closeLightBox)},setupLightbox:function(){a('<div id="post-lightbox-wrap">'+themifyShop.themibox.close+'<div id="post-lightbox-container"><div class="carousel"></div></div></div><a href="#" class="lightbox-direction-nav lightbox-prev">\u00bb</a><a href="#" class="lightbox-direction-nav lightbox-next">\u00ab</a>').hide().prependTo("body")},
clickLightBox:function(c){c.preventDefault();if(Themibox.isFrameLoading)return!1;var e=a(this).prop("href"),b=a(this).closest(".product,.slide-inner-wrap");c=b.find(".product-image img,.slide-image img");var d=a("#post-lightbox-container"),f=a("#post-lightbox-wrap"),g=a("body");b=b.find(".product-image,.slide-image");c=c.length?c.prop("src"):a(this).data("image");c="undefined"!==typeof c?c:themifyShop.placeholder;b=b.length?b:a(this).closest(".type-product");var h=180>b.outerWidth(!0)?b.outerWidth(!0):
180;a(".themibox-clicked").removeClass("themibox-clicked");a(this).addClass("themibox-clicked");Themibox.isFrameLoading=!0;g.addClass("post-lightbox").css("overflow-y","hidden");f.hide().removeClass("lightbox-message").addClass("post-lightbox-prepare woocommerce");d.html('<div class="post-lightbox-iframe"><div class="post-lightbox-main-image"><img src="'+c+'"/></div></div>');f.css({width:b.outerWidth(!0),height:b.outerHeight(!0),top:b.offset().top-a(window).scrollTop()+b.outerHeight(!0)/2,left:b.offset().left-
a(window).scrollLeft()+parseInt(b.outerWidth(!0)/2)}).fadeIn().animate({width:h,top:"50%",left:"50%"},"fast",function(){a.ajax({url:e,beforeSend:function(){a("#pattern").hide().fadeIn(300);d.addClass("post-lightbox-flip-infinite")},success:function(b){var c=!0;Themify.imagesLoad(a('<div class="post-lightbox-temp" id="post-lightbox-wrap"><div id="post-lightbox-container"><div class="post-lightbox-iframe">'+b+"</div></div></div>").prependTo("body"),function(){var e=a("#post-lightbox-wrap.post-lightbox-temp").outerHeight(!0);
a("#post-lightbox-wrap.post-lightbox-temp").remove();d.children(".post-lightbox-iframe").append(b);d.one("animationiteration",function(){c&&(c=!1,a(this).removeClass("post-lightbox-flip-infinite"),f.addClass("animate_start").animate({width:960,height:e},"normal",function(){g.hasClass("iphone")&&(Themibox.topOffset=a(window).scrollTop()+10);a(".lightbox-direction-nav").show();var b=d.find(".post-nav .prev a"),c=d.find(".post-nav .next a");0===b.length&&a(".lightbox-prev").hide();0===c.length&&a(".lightbox-next").hide();
d.find("form").attr("target","_top");Themibox.isFrameLoading=!1;Themibox.lightboxOpen=!0;g.triggerHandler("themiboxloaded",[d]);a(this).removeClass("post-lightbox-prepare animate_start")}))})})}})})},closeLightBox:function(c){c.preventDefault();Themibox.lightboxOpen&&a("#pattern").fadeOut(300,function(){var c=a("#post-lightbox-wrap");if(c.hasClass("lightbox-message"))c.animate({top:Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,
document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))},800,function(){a("body").removeClass("post-lightbox").css("overflow-y","visible");a(".post-lightbox-iframe").empty();a(window).resize();a("body").triggerHandler("themiboxclosed");Themibox.lightboxOpen=!1});else{var b=a(".themibox-clicked").closest(".type-product,.slide-inner-wrap").find(".product-image,.slide-image");b=b.length?b:a(".themibox-clicked").closest(".type-product");c.addClass("animate_start post-lightbox-prepare animate_closing").animate({width:b.outerWidth(!0),
height:b.outerHeight(!0)},"normal",function(){a(".lightbox-direction-nav").hide();a(this).find("#pagewrap").remove();a(this).removeClass("animate_start animate_closing woocommerce").delay(100).animate({top:b.offset().top-a(window).scrollTop()+b.outerHeight(!0)/2,left:b.offset().left-a(window).scrollLeft()+parseInt(b.outerWidth(!0)/2)},"normal",function(){a(this).fadeOut();a(".post-lightbox-iframe").empty();a("body").removeClass("post-lightbox").css("overflow-y","visible");a(window).resize();a("body").triggerHandler("themiboxclosed");
Themibox.lightboxOpen=!1})})}})},keyUp:function(c){Themibox.lightboxOpen&&27===c.keyCode&&a(".close-lightbox").trigger("click")}}})(jQuery);
