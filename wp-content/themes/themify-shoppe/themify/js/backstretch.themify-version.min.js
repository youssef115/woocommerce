'use strict';(function(a,g,q){a.fn.tb_backstretch=function(d,c){"undefined"!==typeof c&&("undefined"===typeof c.mode&&("undefined"!=typeof themifyScript&&"undefined"!=typeof themifyScript.backgroundMode?c.mode=themifyScript.backgroundMode:"undefined"!=typeof themifyVars&&"undefined"!=typeof themifyVars.backgroundMode&&(c.mode=themifyVars.backgroundMode)),"undefined"===typeof c.position&&("undefined"!=typeof themifyScript&&"undefined"!=typeof themifyScript.backgroundPosition&&""!=typeof themifyScript.backgroundPosition?
c.position=themifyScript.backgroundPosition:"undefined"!=typeof themifyVars&&"undefined"!=typeof themifyVars.backgroundPosition&&""!=typeof themifyVars.backgroundPosition&&(c.position=themifyVars.backgroundPosition)),"undefined"===typeof c.is_first&&(c.is_first=!0));d!==q&&0!==d.length||a.error("No images were supplied for Backstretch");0===a(g).scrollTop()&&g.scrollTo(0,0);return this.each(function(){var b=a(this),e=b.data("tb_backstretch");if(e){if("string"==typeof d&&"function"==typeof e[d]){e[d](c);
return}c=a.extend(e.options,c);e.destroy(!0)}e=new r(this,d,c);b.data("tb_backstretch",e)})};a.tb_backstretch=function(d,c){return a("body").tb_backstretch(d,c).data("tb_backstretch")};a.expr[":"].tb_backstretch=function(d){return a(d).data("tb_backstretch")!==q};a.fn.tb_backstretch.defaults={centeredX:!0,centeredY:!0,duration:5E3,fade:0,mode:"",position:""};var u={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},v={position:"absolute",display:"none",margin:0,
padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},r=function(d,c,b){this.options=a.extend({},a.fn.tb_backstretch.defaults,b||{});this.images=a.isArray(c)?c:[c];a.each(this.images,function(){a("<img />")[0].src=this});this.isBody=d===document.body;this.$container=a(d);this.$root=this.isBody?t?a(g):a(document):this.$container;d=this.$container.children(".tb_backstretch").first();this.$wrap=d.length?d:a('<div class="tb_backstretch"></div>').css(u).appendTo(this.$container);
this.isBody||(d=this.$container.css("position"),c=this.$container.css("zIndex"),this.$container.css({position:"static"===d?"relative":d,zIndex:"auto"===c?0:c,backgroundImage:"none"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody&&t?"fixed":"absolute"});this.index=0;this.show(this.index,this.options.is_first);a(g).on("resize.tb_backstretch",a.proxy(this.resize,this)).on("orientationchange.tb_backstretch",a.proxy(function(){this.isBody&&0===g.pageYOffset&&(g.scrollTo(0,1),this.resize())},
this))};r.prototype={resize:function(){try{var a={left:0,top:0},c=this.isBody?this.$root.width():this.$root.innerWidth(),b=c,e=this.isBody?g.innerHeight?g.innerHeight:this.$root.height():this.$root.innerHeight(),f=b/this.$img.data("ratio"),m;if("best-fit"===this.options.mode){var h=parseFloat(this.$img.data("ratio"));b/e>h?this.$img.addClass("best-fit-vertical").removeClass("best-fit-horizontal"):this.$img.addClass("best-fit-horizontal").removeClass("best-fit-vertical")}f>=e?(m=(f-e)/2,this.options.centeredY&&
(a.top="-"+m+"px")):(f=e,b=f*this.$img.data("ratio"),m=(b-c)/2,this.options.centeredX&&(a.left="-"+m+"px"));this.$wrap.css({width:c,height:e}).find("img:not(.deleteable)").css({width:b,height:f}).css(a)}catch(x){}return this},show:function(d,c){if(!(Math.abs(d)>this.images.length-1)){var b=this,f=b.$wrap.find("img").addClass("deleteable"),g={relatedTarget:b.$container[0]};b.$container.trigger(a.Event("tb_backstretch.before",g),[b,d]);this.index=d;clearInterval(b.interval);b.$img=a("<img />").css(v).bind("load",
function(e){var h=this.width||a(e.target).width();e=this.height||a(e.target).height();a(this).data("ratio",h/e);"undefined"!==typeof b&&("best-fit"===b.options.mode?(a(this).parent().addClass("best-fit-wrap"),e=h/e,b.$wrap.width()/b.$wrap.height()>e?a(this).addClass("best-fit best-fit-vertical"):a(this).addClass("best-fit best-fit-horizontal")):"fullcover"===b.options.mode&&b.options.position?a(this).addClass("fullcover-"+b.options.position):"kenburns-effect"===b.options.mode&&a(this).parent().addClass("kenburns-effect"),
c&&a(this).show());a(this).fadeIn(b.options.speed||b.options.fade,function(){f.remove();b.paused||b.cycle();a(["after","show"]).each(function(){b.$container.trigger(a.Event("tb_backstretch."+this,g),[b,d])})});b.resize()}).appendTo(b.$wrap);b.$img.attr("src",b.images[d]);return b}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0,!1)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1,!1)},pause:function(){this.paused=!0;return this},resume:function(){this.paused=
!1;this.next();return this},cycle:function(){1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration));return this},destroy:function(d){a(g).off("resize.tb_backstretch orientationchange.tb_backstretch");clearInterval(this.interval);d||this.$wrap.remove();this.$container.removeData("tb_backstretch")}};var h=navigator.userAgent,n=navigator.platform,f=h.match(/AppleWebKit\/([0-9]+)/);f=!!f&&f[1];var k=h.match(/Fennec\/([0-9]+)/);
k=!!k&&k[1];var p=h.match(/Opera Mobi\/([0-9]+)/),w=!!p&&p[1],l=h.match(/MSIE ([0-9]+)/);l=!!l&&l[1];var t=!((-1<n.indexOf("iPhone")||-1<n.indexOf("iPad")||-1<n.indexOf("iPod"))&&f&&534>f||g.operamini&&"[object OperaMini]"==={}.toString.call(g.operamini)||p&&7458>w||-1<h.indexOf("Android")&&f&&533>f||k&&6>k||"palmGetResource"in g&&f&&534>f||-1<h.indexOf("MeeGo")&&-1<h.indexOf("NokiaBrowser/8.5.0")||l&&6>=l)})(jQuery,window);
