'use strict';var ThemifyGallery={};
(function(b){ThemifyGallery={origHash:null,config:{fullscreen:themifyScript.lightbox.fullscreenSelector,lightbox:themifyScript.lightbox.lightboxSelector,lightboxGallery:themifyScript.lightbox.gallerySelector,lightboxContentImages:themifyScript.lightbox.lightboxContentImagesSelector,is_touch:Themify.isTouch,context:document},init:function(a){if("object"===typeof a&&(a&&b.extend(ThemifyGallery.config,a),a.extraLightboxArgs))for(var d in a.extraLightboxArgs)themifyScript.lightbox[d]=a.extraLightboxArgs[d];
this.parseArgs();this.doLightbox();this.openAnchor()},parseArgs:function(){b.each(themifyScript.lightbox,function(a,b){"false"==b||"true"==b?themifyScript.lightbox[a]="false"!=b:parseInt(b)?themifyScript.lightbox[a]=parseInt(b):parseFloat(b)&&(themifyScript.lightbox[a]=parseFloat(b))})},doLightbox:function(){var a=this.config.context,d={};if("undefined"!==typeof b.fn.magnificPopup&&"undefined"!==typeof themifyScript.lightbox.lightboxOn&&(b(a).on("click",ThemifyGallery.config.lightbox,function(a){a.preventDefault();
if(!b(".mfp-wrap.mfp-gallery").length){var e=b(this),c=0<e.find("> a").length?e.find("> a").attr("href"):e.attr("href"),f=ThemifyGallery.getFileType(c);a=ThemifyGallery.isVideo(c);var g="inline"===f||"iframe"===f?[]:e.data("rel")?b('a[data-rel="'+e.data("rel")+'"]'):e.closest(".module_row, .loops-wrapper").find(".themify_lightbox > img").parent(),l=1<g.length?g.index(this):0,p="undefined"!==typeof b(this).children("img").prop("alt")?b(this).children("img").prop("alt"):b(this).prop("title"),m=a?"100%":
ThemifyGallery.getParam("width",c)?ThemifyGallery.getParam("width",c):"94%",n=a?"100%":ThemifyGallery.getParam("height",c)?ThemifyGallery.getParam("height",c):"100%";-1===m.indexOf("%")&&(m+="px");-1===n.indexOf("%")&&(n+="px");if(a)if(ThemifyGallery.isYoutube(c)){var k=ThemifyGallery.getCustomParams(c);k&&(d.youtube={id:"v=",index:"youtube.com/",src:"//www.youtube.com/embed/%id%"+k});c=ThemifyGallery.getYoutubePath(c)}else if(ThemifyGallery.isVimeo(c)){if(k=ThemifyGallery.getCustomParams(c))d.vimeo=
{id:"/",index:"vimeo.com/",src:"//player.vimeo.com/video/%id%"+k};c=c.split("?")[0]}if(1<g.length&&-1!==l){var h=[];g.each(function(a,c){h.push({src:ThemifyGallery.getiFrameLink(b(c).prop("href")),title:"undefined"!==typeof b(c).find("img").prop("alt")?b(c).find("img").prop("alt"):"",type:ThemifyGallery.getFileType(b(c).prop("href"))})});h=h.reduce(function(a,b){0===a.filter(function(a){return b.src===a.src}).length&&a.push(b);return a},[])}else l=0,h={src:ThemifyGallery.getiFrameLink(c),title:p};
/iPad|iPhone|iPod/.test(navigator.userAgent);c={items:h,type:f,image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-counter"></div><div class="mfp-img"></div><div class="mfp-bottom-bar">'+("no"!==this.dataset.title?'<div class="mfp-title"></div>':"")+'<div class="tb_social_sharing"><a href="#" class="ti-facebook" data-type="facebook"></a><a href="#" class="ti-twitter-alt" data-type="twitter"></a><a href="#" class="ti-email" data-type="email"></a></div></div></div>'},
iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: '+m+" !important; height: "+n+';"><div class="mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" noresize="noresize" frameborder="0" allowfullscreen></iframe></div><div class="tb_social_sharing"><a href="#" class="ti-facebook" data-type="facebook"></a><a href="#" class="ti-twitter-alt" data-type="twitter"></a><a href="#" class="ti-email" data-type="email"></a></div></div>',patterns:d},callbacks:{open:function(){ThemifyGallery.updateHash("open",
this);ThemifyGallery.openSharing(this);var a=e.data("zoom-config"),c={};a&&(a=a.split("|"),"undefined"!==typeof a[0]&&(c.width=a[0]),"undefined"!==typeof a[1]&&(c.height=a[1]),b(this.content).parent().css(c))},change:function(){ThemifyGallery.updateHash("open",this)},close:function(){ThemifyGallery.updateHash("close")}}};1<g.length&&b.extend(c,{gallery:{enabled:!0}});0<e.find("img").length&&b.extend(c,{mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,duration:300,easing:"ease-in-out",
opener:function(){return e.find("img")}}});c.mainClass+=a?" video-frame":" standard-frame";ThemifyGallery.isInIframe()?window.parent.jQuery.magnificPopup.open(c):b.magnificPopup.open(c,l)}}),b(themifyScript.lightbox.contentImagesAreas,a).each(function(){var a=[],d=[];themifyScript.lightbox.lightboxContentImages&&themifyScript.lightbox.lightboxGalleryOn&&b(ThemifyGallery.config.lightboxContentImages,b(this)).filter(function(){if(!b(this).parent().hasClass("gallery-icon")&&!b(this).hasClass("themify_lightbox")){d.push(b(this));
b(this).prop("title");var c=0<b(this).next(".wp-caption-text").length?b(this).next(".wp-caption-text").html():b(this).children("img").prop("alt");a.push({src:b(this).prop("href"),title:c,type:"image"});return b(this)}}).each(function(c){if(0<d.length)b(this).on("click",function(d){d.preventDefault();var f=b(this);d={items:{src:a[c].src,title:a[c].title},image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-counter"></div><div class="mfp-img"></div><div class="mfp-bottom-bar">'+
("no"!==this.dataset.title?'<div class="mfp-title"></div>':"")+'<div class="tb_social_sharing"><a href="#" class="ti-facebook" data-type="facebook"></a><a href="#" class="ti-twitter-alt" data-type="twitter"></a><a href="#" class="ti-email" data-type="email"></a></div></div></div>'},type:"image",callbacks:{open:function(){ThemifyGallery.updateHash("open",this);ThemifyGallery.openSharing(this)},change:function(){ThemifyGallery.updateHash("open",this)},close:function(){ThemifyGallery.updateHash("close")}}};
0<f.find("img").length&&b.extend(d,{mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,duration:300,easing:"ease-in-out",opener:function(){return f.find("img")}}});ThemifyGallery.isInIframe()?window.parent.jQuery.magnificPopup.open(d):b.magnificPopup.open(d)})})}),themifyScript.lightbox.lightboxGalleryOn))b("body").on("click",ThemifyGallery.config.lightboxGallery,function(a){if("image"===ThemifyGallery.getFileType(b(this).prop("href"))){a.preventDefault();var d=b(ThemifyGallery.config.lightboxGallery,
b(this).closest(".module, .gallery")),c=[];d.each(function(){var a=b(this).prop("title");a=""!==a?a:"undefined"!==typeof b(this).children("img").prop("alt")?b(this).children("img").prop("alt"):"";0<b(this).parent().next(".gallery-caption").length?a=b(this).parent().next(".wp-caption-text").html():0<b(this).find(".gallery-caption").find(".entry-content").length&&(a=b(this).find(".gallery-caption").find(".entry-content").text());c.push({src:b(this).prop("href"),title:a,type:"image"})});a={gallery:{enabled:!0},
image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-counter"></div><div class="mfp-img"></div><div class="mfp-bottom-bar">'+("no"!==this.dataset.title?'<div class="mfp-title"></div>':"")+'<div class="tb_social_sharing"><a href="#" class="ti-facebook" data-type="facebook"></a><a href="#" class="ti-twitter-alt" data-type="twitter"></a><a href="#" class="ti-email" data-type="email"></a></div></div></div>'},items:c,mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,
duration:300,easing:"ease-in-out",opener:function(a){a=b(d[a.index]);return a.is("img")?a:a.find("img")}},callbacks:{open:function(){ThemifyGallery.updateHash("open",this);ThemifyGallery.openSharing(this)},change:function(){ThemifyGallery.updateHash("open",this)},close:function(){ThemifyGallery.updateHash("close")}}};ThemifyGallery.isInIframe()?window.parent.jQuery.magnificPopup.open(a,d.index(this)):b.magnificPopup.open(a,d.index(this))}})},countItems:function(a){var d=this.config.context;return"lightbox"===
a?b(this.config.lightbox,d).length+b(this.config.lightboxGallery,d).length+b(ThemifyGallery.config.lightboxContentImages,d).length:b(this.config.fullscreen,d).length+b(ThemifyGallery.config.lightboxContentImages,d).length},isInIframe:function(){return"undefined"!==typeof ThemifyGallery.config.extraLightboxArgs?"undefined"!==typeof ThemifyGallery.config.extraLightboxArgs.displayIframeContentsInParent&&1==ThemifyGallery.config.extraLightboxArgs.displayIframeContentsInParent:!1},getFileType:function(a){return a.match(/\.(gif|jpg|jpeg|tiff|png)(\?fit=\d+(,|%2C)\d+)?(&ssl=\d+)?$/i)?
"image":a.match(/\bajax=true\b/i)?"ajax":"#"===a.substr(0,1)?"inline":"iframe"},isVideo:function(a){return ThemifyGallery.isYoutube(a)||ThemifyGallery.isVimeo(a)||a.match(/\b.mov\b/i)||a.match(/\b.swf\b/i)},isYoutube:function(a){return a.match(/youtube\.com\/watch/i)||a.match(/youtu\.be/i)},isVimeo:function(a){return a.match(/vimeo\.com/i)},getYoutubePath:function(a){return a.match(/youtu\.be/i)?"//youtube.com/watch?v="+a.match(/youtu\.be\/([^\?]*)/i)[1]:"//youtube.com/watch?v="+ThemifyGallery.getParam("v",
a)},getiFrameLink:function(a){"iframe"===ThemifyGallery.getFileType(a)&&null===ThemifyGallery.isVideo(a)&&(a=Themify.UpdateQueryString("iframe","true",a));return a},getParam:function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==a?"":a[1]},getCustomParams:function(a){a=(a=a.split("?")[1])?"&"+a.replace(/[\\?&]?(v|autoplay)=[^&#]*/g,"").replace(/^&/g,""):"";return"?autoplay=1"+a},openSharing:function(a){Themify.LoadCss(themify_vars.url+
"/themify-icons/themify-icons.css",themify_vars.version);var b=a.content[0].getElementsByClassName("tb_social_sharing")[0];void 0!==b&&b.addEventListener("click",function(b){Themify.sharer(b.target.dataset.type,a.currItem.data.src.replace("?iframe=true",""),a.currItem.data.title);return!1})},updateHash:function(a,b){"open"===a?(null===ThemifyGallery.origHash&&(ThemifyGallery.origHash=window.location.hash),a=b.currItem.data.title,b=document.createElement("div"),b.innerHTML=a,a=b.textContent.trim(),
""!==a&&this._updateHash(a)):(a=ThemifyGallery.origHash,this._updateHash(a),ThemifyGallery.origHash=null)},_updateHash:function(a){"#"!==(""+a).charAt(0)&&(a="#"+a);history.replaceState("","",a)},openAnchor:function(){if(""!==window.location.hash){var a=decodeURI(window.location.hash.substring(1)),b=document.querySelector('[alt="'+a+'"]');b=null===b?document.querySelector('[title="'+a+'"]'):b;null!==b&&b.click()}}}})(jQuery);
