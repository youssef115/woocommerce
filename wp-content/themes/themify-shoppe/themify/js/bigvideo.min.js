'use strict';(function(c,k,l){function f(b,a){this.element=b;this.options=c.extend({},m,a);this.init()}var g=!1,m={url:!1,autoPlay:!0,doLoop:!1,ambient:!1,id:"",onload:null,onStart:null,onPlay:null,onPause:null,onEnd:null};f.prototype={isPlaying:!1,mediaAspect:16/9,prefix:"tf-",items:{},player:null,init:function(){if(this.options.url){var b=function(d){a.player.removeEventListener("canplay",b,!1);a.bindEvents(d)};this.player=l.createElement("video");this.player.id=this.prefix+this.options.id;this.player.preload=
"auto";this.player.className="tf-video";this.player.width=1;this.player.height=1;this.player.src=this.options.url;this.player.setAttribute("webkit-playsinline",1);this.options.doLoop&&(this.player.loop=!0);this.options.autoPlay&&(this.player.autoplay=!0,this.options.ambient=!0);this.options.ambient&&(this.player.muted=!0,this.player.setAttribute("muted","muted"));var a=this;c.isFunction(this.options.onload)&&this.player.addEventListener("loadedmetadata",function(b){a.options.onload.call(a,b)});a.player.addEventListener("canplay",
b);var e=l.createElement("div");e.className="big-video-wrap";e.appendChild(this.player);this.element.insertAdjacentElement("afterbegin",e)}},bindEvents:function(b){var a=this;c.isFunction(a.options.onStart)&&a.options.onStart.call(a,b);a.player.addEventListener("play",function(b){a.isPlaying=!0;c.isFunction(a.options.onPlay)&&a.options.onPlay.call(a,b)});a.player.addEventListener("pause",function(b){a.isPlaying=!1;c.isFunction(a.options.onPause)&&a.options.onPause.call(a,b)});a.player.addEventListener("ended",
function(b){a.isPlaying=!1;setTimeout(function(){a.player.loop&&a.play()},50);c.isFunction(a.options.onEnd)&&a.options.onEnd.call(a,b)});a.options.autoPlay&&a.play();a.updateSize();this.items[this.options.id]=a;g||(g=!0,a.onResize())},onResize:function(){var b=this;c(k).on("tfsmartresize.tfVideo",function(){for(var a in b.items)b.items[a].updateSize()})},getPlayer:function(){return this.player},play:function(){this.isPlaying||this.player.play()},pause:function(){this.isPlaying&&this.player.pause()},
update:function(b){this.player.src=b;this.player.load()},muted:function(b){this.player.muted=b},loop:function(b){this.player.loop=b;!this.isPlaying&&b&&this.play()},updateSize:function(){if(null!==l.getElementById(this.prefix+this.options.id)){var b=c(k).width(),a=c(this.element),e=c(this.player),d=a.outerWidth();a=a.outerHeight();d=d<b?d:b;b=d/a;var h=e.prop("videoWidth")/e.prop("videoHeight");if(b<h){b=a*h;var f=a;var g=-(a*h-d)/2;d=0}else b=d,f=d/h,g=0,d=-(d/h-a)/2;e.css({width:b+"px",height:f+
"px",top:d,left:g})}else this.dispose()},dispose:function(){var b=c(this.player);0<b.length&&(this.player.pause(),this.player.src="",b.find("source").prop("src",""),b.parent().remove(),this.player=null);delete this.items[this.options.id];0===Object.keys(this.items).length&&c(k).off("tfsmartresize.tfVideo")}};c.fn.ThemifyBgVideo=function(b){return this.each(function(){c.data(this,"plugin_ThemifyBgVideo",new f(this,b))})}})(jQuery,window,document);
