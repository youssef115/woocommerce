'use strict';(function(a,m,e,p){function g(b){a(".prompt-box .show-login").show();a(".prompt-box .show-error").hide();a(".prompt-box .prompt-error").remove();"error"===b?a(".prompt-box .prompt-msg").after('<p class="prompt-error">'+themify_lang.invalid_login+"</p>"):"unsuscribed"===b&&a(".prompt-box .prompt-msg").after('<p class="prompt-error">'+themify_lang.unsuscribed+"</p>");a(".prompt-box").addClass("update-plugin");a(".overlay, .prompt-box").fadeIn(500)}function k(){a(".overlay, .prompt-box").fadeOut(500)}
function h(b){"error"===b?(b="error",a(".overlay, .prompt-box").delay(900).fadeIn(500),a(".prompt-box .show-error").show(),a(".prompt-box .show-error p").remove(),a(".prompt-box .error-msg").after('<p class="prompt-error">undefined</p>'),a(".prompt-box .show-login").hide()):b="done";a(".tb_alert").removeClass("busy").addClass(b).delay(800).fadeOut(800,function(){a(this).removeClass(b)})}function n(){function b(){d.removeEventListener("click",b);var c=this;a.ajax({url:ajaxurl,type:"POST",data:{action:"tb_load_maintenance_pages",
nonce:themify_js_vars.nonce},success:function(a){c.innerHTML=a}})}function c(){var a=e.getElementById("tools_maintenance_mode");e.getElementsByClassName("tb_maintenance_page")[0].style.display=a.checked?"block":"none"}var d=e.getElementById("tools_maintenance_page");null!==d&&d.addEventListener("click",b);var l=e.getElementById("tools_maintenance_mode");null!==l&&(l.addEventListener("change",c),c())}var f;a(function(){a(".tb_upgrade_plugin").on("click",function(b){b.preventDefault();a(".themify-builder-upgrade-plugin").removeClass("themify-builder-upgrade-plugin");
f=a(this).addClass("themify-builder-upgrade-plugin");g()});(function(){var b=m.location.search;-1<b.indexOf("tfplugin")&&(b=b.match(/tfplugin=([^&,#]+)/),b[1]&&(b=b[1],a(".tb_upgrade_plugin[data-plugin*="+b+"]").trigger("click")))})();a(".tb_upgrade_login").on("click",function(b){b.preventDefault();if(a(".prompt-box").hasClass("update-plugin")){var c=a(this);b=c.parent().parent().find(".username").val();var d=c.parent().parent().find(".password").val();c=c.closest(".notifications").find(".update").hasClass("login");
""!==b&&""!==d?(k(),a(".tb_alert").addClass("busy").fadeIn(800),a.post(ajaxurl,{action:"themify_builder_validate_login",type:"plugin",login:c,username:b,password:d,nicename_short:f.data("nicename_short"),update_type:f.data("update_type")},function(b){b=a.trim(b);"true"===b?(h(),a("#themify_update_form").append('<input type="hidden" name="plugin" value="'+f.data("plugin")+'" /><input type="hidden" name="package_url" value="'+f.data("package_url")+'" />').submit()):"unsuscribed"===b?(h("error"),g("unsuscribed")):
(h("error"),g("error"))})):(h("error"),g("error"))}});a(".overlay").on("click",function(){k()});a(e).ready(function(){n()})})})(jQuery,window,document);
