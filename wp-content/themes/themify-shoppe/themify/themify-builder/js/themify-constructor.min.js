'use strict';var ThemifyConstructor;
(function(q,y,r,l,h){var m={ActionBar:{}},A="undefined"!==typeof ThemifyBuilderCommon?ThemifyBuilderCommon:{};ThemifyConstructor={data:null,key:"tb_form_templates_",styles:{},settings:{},editors:null,afterRun:[],radioChange:[],bindings:[],stylesData:null,values:{},clicked:null,type:null,static:null,label:null,is_repeat:null,is_sort:null,is_new:null,is_ajax:null,breakpointsReverse:null,set:function(a){try{var b="",c;for(c in themifyBuilder.modules)b+=c;var d={val:a,ver:tbLocalScript.version,h:y.hash(b)};
localStorage.setItem(this.key,JSON.stringify(d));return!0}catch(e){return!1}},get:function(){if(themifyBuilder.debug)return!1;try{localStorage.removeItem("tb_form_templates");var a=localStorage.getItem(this.key),b="";if(!a)return!1;a=JSON.parse(a);for(var c in themifyBuilder.modules)b+=c;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==y.hash(b)?!1:a.val}catch(d){}return!1},getForms:function(a){if("undefined"!==typeof tb_app){if(tb_app.Constructor!==h){for(var b in tb_app.Constructor)ThemifyConstructor[b]=
tb_app.Constructor[b];delete tb_app.Constructor}A=ThemifyBuilderCommon;m=tb_app}this.breakpointsReverse=Object.keys(themifyBuilder.breakpoints).reverse();this.breakpointsReverse.push("desktop");var c=this;b=c.get();var d=function(b){A.Lightbox.setup();A.LiteLightbox.modal.on("attach",function(){this.el.classList.add("tb_lite_lightbox_modal")});c.data=b;"visual"===m.mode&&(m.EdgeDrag.modules=JSON.parse(localStorage.getItem("tb_dragger")));a&&a()};if(!1!==b)d(b);else{var e={},f={},g=function(a){++a;
q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_form_templates",tb_load_nonce:themifyBuilder.tb_load_nonce,page:a},success:function(b){b&&("ok"!==b.v&&(f=q.extend(f,b.v),e=q.extend(e,b.d)),"ok"!==b.v&&b.l===Object.keys(b.v).length?g(a):(localStorage.setItem("tb_dragger",JSON.stringify(e)),d(f),c.set(f),f=e=a=null))}})};g(0)}c.static=themifyBuilder.i18n.options;themifyBuilder.i18n.options=null;this.label=themifyBuilder.i18n.label;themifyBuilder.i18n.label=null;
var k=c.static.fonts.safe;b=0;for(var n=k.length;b<n;++b)""!==k[b].value&&"default"!==k[b].value&&(c.font_select.safe[k[b].value]=k[b].name);c.static.fonts.safe=null;k=c.static.fonts.google;b=0;for(n=k.length;b<n;++b)""!==k[b].value&&"default"!==k[b].value&&(c.font_select.google[k[b].value]={n:k[b].name,v:k[b].variant});c.static.fonts.google=k=themifyBuilder.google=null;k=c.static.fonts.cf;b=0;for(n=k.length;b<n;++b)""!==k[b].value&&"default"!==k[b].value&&(c.font_select.cf[k[b].value]={n:k[b].name,
v:k[b].variant});c.static.fonts.cf=k=themifyBuilder.cf=null},getOptions:function(a){if(a.options!==h)return a.options;for(var b in this.static)if(!0===a[b])return this.static[b];return!1},getTitle:function(a){return"custom_css"===a.type?this.label.custom_css:"title"===a.type?this.label.m_t:a.label!==h?this.label[a.label]!==h?this.label[a.label]:a.label:!1},getSwitcher:function(){var a=l.createElement("ul"),b=this.breakpointsReverse,c=this;a.className="tb_lightbox_switcher clearfix";for(var d=b.length-
1;-1<d;--d){var e=b[d],f=l.createElement("li"),g=l.createElement("a"),k=l.createElement("i");g.href="#"+e;g.className="tab_"+e;g.title="tablet_landscape"===e?this.label.table_landscape:e.charAt(0).toUpperCase()+e.substr(1);k.className="ti-"+e;"tablet_landscape"===e&&(k.className+=" ti-tablet");g.appendChild(k);f.appendChild(g);a.appendChild(f)}a.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();b.target!==a&&(b=b.target.closest("a"),null!==b&&c.lightboxSwitch(b.getAttribute("href")))});
return a},lightboxSwitch:function(a){a=a.replace("#","");a!==m.activeBreakPoint&&(m.activeModel&&"visual"===m.mode&&(m.scrollTo=m.liveStylingInstance.$liveStyledElmt),q(".tb_breakpoint_switcher.breakpoint-"+a,r.document).trigger("click"))},binding:function(a,b,c,d){var e=!1,f=b.binding,g="desktop"!==m.activeBreakPoint;b=b.type;"select"===b&&0==c&&(c="");c||f.empty===h?c&&f[c]!==h?e="radio"===b||"icon_radio"===b?!0===a.checked?f[c]:!1:f[c]:c&&f.not_empty!==h?e=f.not_empty:f.select!==h&&c!==f.select.value?
e=f.select:f.checked!==h&&!0===a.checked?e=f.checked:f.not_checked!==h&&!1===a.checked&&(e=f.not_checked):e=f.empty;if(e){c=[];e.show!==h&&(c=e.show);e.hide!==h&&(c=c.concat(e.hide));if(d===h||null===d||0===d.length)d=a.closest(".tb_tab"),null===d&&(d=a.closest(".tb_expanded_opttions"),null===d&&(d=r.document.getElementById("tb_lightbox_container")));b=e.hide!==h;var k=e.show!==h,n=this,l=[],p=function(a,b){for(var c,d=Object.keys(a),e=d.length,f=0;f<e;f++){if(h!==a[d[f]].id&&a[d[f]].id===b){c=a[d[f]];
break}if(a[d[f]]&&"object"===typeof a[d[f]]&&(c=p(a[d[f]],b),c!==h))break}return c},w=function(a,b,c){var d=a.dataset.type;if("radio"===d){var e=a.querySelector("input:checked");null===e&&(e=a.getElementsByTagName("INPUT")[0])}else"checkbox"===d||"toggle_switch"===d?e=a.getElementsByTagName("INPUT")[0]:"select"===d&&(e=a.getElementsByTagName("SELECT")[0]);h!==e&&n.binding(e,b,e.value,c)};a=0;for(var u=c.length;a<u;++a){if(!0===b&&e.hide[a]!==h){var x=d.querySelectorAll("."+e.hide[a]);for(f=x.length-
1;-1<f;--f)if(x[f].classList.add("_tb_hide_binding"),"object"===typeof this.data&&null!==this.type&&"object"===typeof this.data[this.type]){var v=p(this.data[this.type][this.clicked],c[a]);"object"===typeof v&&"object"===typeof v.binding&&l.push({el:x[f],data:v})}x=null}if(!0===k&&e.show[a]!==h){x=d.querySelectorAll("."+e.show[a]);for(f=x.length-1;-1<f;--f)x[f].classList.remove("_tb_hide_binding"),"object"===typeof this.data&&null!==this.type&&"object"===typeof this.data[this.type]&&(v=p(this.data[this.type][this.clicked],
c[a]),"object"===typeof v&&"object"===typeof v.binding&&l.push({el:x[f],data:v}));x=null}}for(a=l.length-1;-1<a;--a)w(l[a].el,l[a].data,d);l=null;if(e.responsive!==h&&e.responsive.disabled!==h)for(a=e.responsive.disabled.length-1;-1<a;--a)if(e.responsive.disabled[a]!==h)for(c=d.querySelectorAll("."+e.responsive.disabled[a]),f=c.length-1;-1<f;--f)!0===g?c[a].classList.add("responsive_disable"):c[a].classList.remove("responsive_disable")}},control:{init:function(a,b,c){c.name=b;this[b].call(this,a,
c)},preview:function(a,b,c){if("visual"===m.mode){var d=null,e=ThemifyConstructor,f=null;!0===c.repeat&&(f=a.closest(".tb_toggleable_fields"),null===f&&(f=a.closest(".tb_sort_fields_parent"),null===f&&(f=a.closest(".tb_row_js_wrapper"))));if(c.selector!==h&&b)if(d=m.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(c.selector),0===d.length)d=null;else if(null!==f){var g=a.closest(".tb_repeatable_field"),k=Array.prototype.slice.call(f.children);c.rep!==h?(d=m.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(c.rep),
d=d[k.indexOf(g)],d!==h?(d=d.querySelectorAll(c.selector),0===d.length&&(d=null)):d=null):d=d.length===k.length-1?d[k.indexOf(g)]:null}null!==f?e.settings[f.id]=m.Utils.clear(m.Forms.parseSettings(f).v):e.settings[c.id]=b;"refresh"===c.type||!0===e.is_ajax?m.activeModel.trigger("custom:preview:refresh",e.settings,d,b):m.activeModel.trigger("custom:preview:live",e.settings,"wp_editor"===c.name||"TEXTAREA"===a.tagName,null,d,b)}else m.activeModel.backendLivePreview();m.hasChanged=!0},change:function(a,
b){var c=this,d="refresh"===b.type&&b.selector===h?1E3:50;if(b.event===h){var e="change";d=1}else e=b.event;a.addEventListener(e,_.throttle(function(a){var d=a.target;if("keyup"===a.type){if(d.value===d.dataset.oldValue)return;d.dataset.oldValue=d.value}c.preview(d,d.value,b)},d),{passive:!0})},wp_editor:function(a,b){q(".wrap > #message").attr("id","wp-message");var c=this,d=q(a),e=a.id,f=!1,g=!1,k=_.throttle(function(e){e="setupeditor"===this.type?this.getContent():this.value;null!==m.activeModel&&
f!==e&&(f=e,!1!==g?(a.value=e,d.trigger("change")):c.preview(a,e,b))},"refresh"===b.type&&b.selector===h?1E3:50);m.Utils.initQuickTags(e);tinyMCE!==h&&(tinymce.editors[e]!==h&&tinyMCE.execCommand("mceRemoveEditor",!0,e),e=m.Utils.initNewEditor(e),g=a.classList.contains("wp-editor-area")?0<d.closest("#instance_widget").length:!1,!e.type&&(e.type="setupeditor"),e.on("change keyup",k));d.on("change keyup",k)},layout:function(a,b){if("visual"===m.mode){var c=this;a.addEventListener("change",function(a){a=
a.detail.val;if(b.classSelector!==h){var d=b.id,f=ThemifyConstructor.settings[d],g=""!==b.classSelector?m.liveStylingInstance.$liveStyledElmt.find(b.classSelector).first():m.liveStylingInstance.$liveStyledElmt;ThemifyConstructor.settings[d]=a;0<g.length?(g.removeClass(f).addClass(a),m.Utils.loadContentJs(m.liveStylingInstance.$liveStyledElmt,"module")):c.preview(this,a,b)}else c.preview(this,a,b)},{passive:!0})}},icon:function(a,b){var c=this;a.addEventListener("change",function(a){var d=a.target.value,
f=this.closest(".tb_input").getElementsByClassName("themify_fa_toggle")[0];if(f!==h){f.className="tb_plus_btn themify_fa_toggle icon-close";var g=m.Utils.getIcon(d);!1===g&&(g="default_icon");f.className+=" "+g}c.preview(a.target,d,b)},{passive:!0})},checkbox:function(a,b){if("visual"===m.mode){var c=this;a.addEventListener("change",function(){for(var a=[],e=this.closest(".themify-checkbox").getElementsByClassName("tb-checkbox"),f=0,g=e.length;f<g;++f)e[f].checked&&a.push(e[f].value);c.preview(this,
a.join("|"),b)},{passive:!0})}},color:function(a,b){if("visual"===m.mode){var c=this;a.addEventListener("themify_builder_color_picker_change",function(a){c.preview(this,a.detail.val,b)},{passive:!0})}},widget_select:function(a,b){this.preview(a,a.find(":input").themifySerializeObject(),b)},queryPosts:function(a,b){if("visual"===m.mode){var c=this;a.addEventListener("queryPosts",function(a){b.id=this.id;ThemifyConstructor.settings=m.Utils.clear(m.Forms.serialize("tb_options_setting"));c.preview(this,
ThemifyConstructor.settings[b.id],b)},{passive:!0})}}},initControl:function(a,b){if(null!==m.activeModel){if("setting"===this.clicked&&"custom_css"!==b.type){if(!1!==b.control&&"module"===this.component){var c=b.control||{},d=b.type;!0===c.repeat?c.id=a.getAttribute("data-input-id"):!0===this.is_repeat?(c.repeat=!0,c.id=a.getAttribute("data-input-id")):c.id=b.id;if(c.control_type===h){if(d===h||"text"===d||"number"===d||"url"===d||"autocomplete"===d||"range"===d||"radio"===d||"icon_radio"===d||"select"===
d||"gallery"===d||"textarea"===d||"address"===d||"image"===d||"date"===d||"audio"===d||"video"===d||"select_menu"===d||"widgetized_select"===d||"layoutPart"===d||"selectSearch"===d||"hidden"===d||"toggle_switch"===d)c.event!==h||"text"!==d&&"textarea"!==d||(c.event="keyup"),d="change"}else d=c.control_type;this.control.init(a,d,c)}}else"visual"===m.mode&&"styling"===this.clicked&&m.liveStylingInstance.bindEvents(a,b);if(b.binding!==h){var e=this,f=!0===e.is_repeat,g=function(c,d){if(f){var g=a.closest(".tb_sort_field_dropdown");
null===g&&(g=a.closest(".tb_toggleable_fields_options"),null===g&&(g=a.closest(".tb_repeatable_field_content")))}e.binding(c,b,d,g)};"layout"===b.type||"frame"===b.type?a.addEventListener("click",function(a){a=a.target.closest(".tfl-icon");null!==a&&g(this,a.id)},{passive:!0}):a.addEventListener("change",function(a){g(this,this.value)},{passive:!0});this.bindings.push({el:a,data:b,repeat:f})}}return a},callbacks:function(){if(null!==this.afterRun){var a=this.afterRun.length;if(0<a){for(a=0;a<this.afterRun.length;++a)this.afterRun[a].call();
this.afterRun=[]}}if(null!==this.radioChange&&(a=this.radioChange.length,0<a)){for(a=0;a<this.radioChange.length;++a)this.radioChange[a].call();this.radioChange=[]}if(null!==this.bindings&&(a=this.bindings.length,0<a)){for(--a;-1<a;--a){var b=this.bindings[a].el,c=!0===this.bindings[a].repeat?b.closest(".tb_repeatable_field_content"):h,d="layout"===this.bindings[a].data.type||"frame"===this.bindings[a].data.type?b.getElementsByClassName("selected")[0].id:b.value;!0===this.bindings[a].repeat&&(c=b.closest(".tb_sort_field_dropdown"),
null===c&&(c=b.closest(".tb_toggleable_fields_options"),null===c&&(c=b.closest(".tb_repeatable_field_content"))));this.binding(b,this.bindings[a].data,d,c)}this.bindings=[]}},setUpEditors:function(){for(var a=this.editors.length-1;-1<a;--a)this.initControl(this.editors[a].el,this.editors[a].data);this.editors=[]},switchTabs:function(a){"A"===this.nodeName&&a.preventDefault();a.stopPropagation();a=this.getAttribute("href");var b=this.parentNode,c=r.document.getElementById(a.replace("#",""));if(null!==
c&&!b.classList.contains("current")){for(var d=b.parentNode,e=d.children,f=c.parentNode.children,g=e.length-1;-1<g;--g)e[g].classList.remove("current");b.classList.add("current");for(g=f.length-1;-1<g;--g)f[g].classList.contains("tb_tab")&&(f[g].style.display="none");c.style.display="block";y.body.triggerHandler("themify_builder_tabsactive",[a,c]);y.triggerEvent(c,"themify_builder_tabsactive",{id:a});m.Utils.hideOnClick(d);"visual"===m.mode&&q(l).triggerHandler("mouseup")}},run:function(a,b){this.styles=
{};this.settings={};this.editors=[];this.afterRun=[];this.radioChange=[];this.bindings=[];this.stylesData={};this.component=this.is_sort=this.is_repeat=null;this.type=a;this.is_ajax=this.is_new=null;var c=!1,d=!1,e=m.activeModel;if(null!==e){this.component=e.get("elType");d=l.getElementsByClassName("tb_element_cid_"+e.cid)[0];"module"===this.component?(this.is_ajax="ajax"===themifyBuilder.modules[a].type,c="mod_settings",e.get("is_new")!==h&&(this.is_new=!0,d=d.closest(".module_row"))):c="styling";
this.values=q.extend(!0,{},e.get(c));d!==h&&(m.beforeEvent=A.clone(d));d=e.get("visibileClicked")!==h;c=!1===d&&("column"===this.component||"subrow"===this.component||e.get("styleClicked")!==h);var f=this.data[a]}else this.values={},this.component=null,f=a;var g=l.createDocumentFragment();a=l.createDocumentFragment();var k=this,n=function(a,b){var c=l.createElement("div"),d=l.createDocumentFragment();c.className="tb_options_tab_content";if("visibility"===a||"animation"===a)b=k.static[a];else if("styling"===
a){var f=l.createElement("div"),g=m.GS.globalStylesHTML();f.className="tb_styling_tab_header";f.appendChild(k.getSwitcher());g&&f.appendChild(g);d.appendChild(f);f=null}c.appendChild(k.create(b));d.appendChild(c);"styling"===a&&(b=l.createElement("a"),c=l.createElement("i"),b.href="#",b.className="reset-styling",c.className="ti-close",b.appendChild(c),b.appendChild(l.createTextNode(k.label.reset_style)),b.addEventListener("click",k.resetStyling.bind(k)),d.appendChild(b),"visual"===m.mode&&e&&setTimeout(function(){m.liveStylingInstance.module_rules=
k.styles},600));"animation"===a&&(a=l.createElement("a"),a.href="#",a.className="tb_motion_reset_link",a.appendChild(l.createTextNode(k.label.reset_effect)),a.addEventListener("click",k.resetEffect.bind(k)),d.appendChild(a));return d};this.clicked=null;for(var t in f){var p=l.createElement("li"),w=l.createElement("a"),u=l.createElement("span"),x=l.createElement("div"),v=f[t].name!==h?f[t].name:this.label[t],C="tb_options_"+t;w.href="#"+C;w.textContent=v;"setting"!==t&&(w.className="tb_tooltip",u.textContent=
v,w.appendChild(u));x.id=C;x.className="tb_tab tb_options_tab_wrapper";if(!0===c&&"styling"===t||!0===d&&"visibility"===t||!1===c&&!1===d&&"setting"===t||null===this.component)p.className="current",k.clicked=t,f[t].html!==h?x.appendChild(f[t].html):x.appendChild(n(t,f[t].options)),x.style.display="block",new SimpleBar(x),x.dataset.done=!0;x.addEventListener("themify_builder_tabsactive",function(a){a=a.detail.id.replace("#tb_options_","");k.clicked=a;this.dataset.done===h&&(this.dataset.done=!0,this.appendChild(n(a,
f[a].options)),k.callbacks(),new SimpleBar(this),"setting"===a&&k.setUpEditors())},{passive:!0});w.addEventListener("click",this.switchTabs);a.appendChild(x);p.appendChild(w);g.appendChild(p)}t=A.Lightbox.$lightbox[0].getElementsByClassName("tb_options_tab")[0];for(w=A.Lightbox.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0];null!==t.firstChild;)t.removeChild(t.firstChild);for(;null!==w.firstChild;)w.removeChild(w.firstChild);t.appendChild(g);if(b!==h||e){var z=l.createElement("button");
z.className="builder_button builder_save_button";z.title=b!==h&&b.ctr_save!==h?this.label[b.ctr_save]:this.label.ctr_save;z.textContent=b!==h&&b.done!==h?this.label[b.done]:this.label.done;if(e){m.autoSaveCid=e.cid;if("visual"===m.mode){null!==m.GS.activeGS?(m.liveStylingInstance=m.createStyleInstance(),m.liveStylingInstance.init(null,!0)):(null===m.liveStylingInstance&&(m.liveStylingInstance=m.createStyleInstance()),m.liveStylingInstance.init());var r=m.liveStylingInstance.$liveStyledElmt[0].outerHTML}var B=
function(a){a.preventDefault();a.stopImmediatePropagation();k.saveComponent(!1)&&(z.removeEventListener("click",B,{once:!1}),D.removeEventListener("click",B,{once:!0}))},D=l.createElement("a");p=l.createElement("li");b=l.createElement("span");p.className="tb_top_save_btn";D.className="ti-check tb_tooltip";b.textContent=this.label.done;D.appendChild(b);p.appendChild(D);t.appendChild(p);z.addEventListener("click",B,{once:!1});D.addEventListener("click",B,{once:!0})}w.appendChild(z)}y.body.one("themify_builder_lightbox_close",
function(){k.radioChange=k.bindings=k.stylesData=k.is_ajax=k.is_repeat=k.is_sort=k.afterRun=k.editors=k.clicked=k.settings=k.styles=null;if(e){"function"===typeof B&&z.removeEventListener("click",B,{once:!0});if(k.is_new&&"module"===m.activeModel.get("elType"))var a=("visual"===m.mode?m.liveStylingInstance.$liveStyledElmt:y.body.find(".tb_element_cid_"+m.activeModel.cid)).closest(".module_row.tb_new_row");if(!0!==m.saving&&r!==h&&m.hasChanged){var b=m.Models.Registry.lookup(e.cid);b&&b.trigger("custom:restorehtml",
r)}k.is_new?(e.unset("is_new",{silent:!0}),!0!==m.saving?(e.trigger("dom:module:unsaved"),h!==a&&0<a.length&&(b=m.Models.Registry.lookup(a.data("cid")))&&b.destroy()):0<a.length&&a[0].classList.remove("tb_new_row")):(e.unset("styleClicked",{silent:!0}),e.unset("visibileClicked",{silent:!0}));if(tinyMCE!==h)for(a=tinymce.editors.length-1;-1<a;--a)"content"!==tinymce.editors[a].id&&tinyMCE.execCommand("mceRemoveEditor",!0,tinymce.editors[a].id);"visual"===m.mode&&m.liveStylingInstance.clear();m.activeModel=
e=null}y.body.off("themify_builder_change_mode.updatestyles");r=k.values=k.type=k.component=k.is_new=null;k.tabs.click=0}).on("themify_builder_change_mode.updatestyles",this.updateStyles.bind(this));setTimeout(function(){"setting"===k.clicked&&k.setUpEditors();k.callbacks();y.triggerEvent(l,"tb_editing_"+k.type);"module"===k.component&&y.triggerEvent(l,"tb_editing_module")},5);!0===c?e.unset("styleClicked",{silent:!0}):!0===d&&e.unset("visibileClicked",{silent:!0});return a},getStyleVal:function(a,
b,c){if(null!==m.activeModel){c===h&&(c=this.values);b===h&&(b=m.activeBreakPoint);if("desktop"===b||"styling"!==this.clicked)return""!==c[a]?c[a]:h;var d=this.breakpointsReverse;b=d.indexOf(b);for(var e=d.length;b<e;++b)if("desktop"!==d[b]){if(c["breakpoint_"+d[b]]!==h&&c["breakpoint_"+d[b]][a]!==h&&""!==c["breakpoint_"+d[b]][a])return c["breakpoint_"+d[b]][a]}else if(""!==c[a]){d=h!=this.stylesData[a]?this.stylesData[a].binding:h;if(h!==d&&h!==d[c[a]]&&h!==d[c[a]].responsive&&h!==d[c[a]].responsive.disabled&&
-1!==d[c[a]].responsive.disabled.indexOf(a))break;return c[a]}}return h},updateStyles:function(a,b,c){this.setStylingValues(b);a=this.clicked;this.clicked="styling";for(var d in this.stylesData){var e=this.stylesData[d].type;if("video"!==e&&"gallery"!==e&&"autocomplete"!==e&&"custom_css"!==e&&"builder"!==e&&!1!==this.stylesData[d].is_responsive&&("icon_radio"===e?e="radio":"icon_checkbox"===e?e="checkbox":"textarea"===e||"icon"===e||"hidden"===e||"number"===e?e="text":"image"===e?e="file":"padding"===
e||"border_radius"===e?e="margin":"frame"===e&&(e="layout"),b=this.getStyleVal(d),this[e].update(d,b,this),this.stylesData[d].binding!==h)){var f=r.document.getElementById(d);e="layout"===e?f.getElementsByClassName("tfl-icon"):"radio"===e||"checkbox"===e?f.getElementsByTagName("input"):[f];f=this.stylesData[d];for(var g=0,k=e.length;g<k;++g)this.binding(e[g],f,b)}}d=r.document.querySelectorAll("#tb_options_styling option.responsive_disable");if(0<d.length)for(b=d.length-1;0<=b;b--)d[b].disabled="desktop"!==
c;this.clicked=a},setStylingValues:function(a){var b=m.Forms.serialize("tb_options_styling",!0),c="desktop"===a;!1===c&&this.values["breakpoint_"+a]===h&&(this.values["breakpoint_"+a]={});for(var d in b)!0===c?this.values[d]=b[d]:this.values["breakpoint_"+a][d]=b[d]},saveComponent:function(a){if(null!==this.values){m.saving=!0;var b=m.Forms,c="module"===this.component;if(c&&!b.isValidate(r.document.getElementById("tb_options_setting"))||A.Lightbox.$lightbox[0].getElementsByClassName("tb_disable_save")[0]!==
h)return m.beforeEvent=null,m.saving=!1;y.body.triggerHandler("themify_builder_save_component",a);"visual"===m.mode&&r.jQuery("body").triggerHandler("themify_builder_save_component",a);delete this.values.cid;var d=!1,e=q.extend(!0,{},this.beforeData?this.beforeData:this.values),f="styling",g=l.getElementsByClassName("tb_element_cid_"+m.activeModel.cid)[0];g===h&&(g=l.querySelector('[data-cid="'+m.activeModel.cid+'"]'));if(null!==g){g=q(g);if("column"!==this.component){if("subrow"!==this.component){c&&
(f="mod_settings");var k=b.serialize("tb_options_setting",!0);for(n in k)this.values[n]=k[n]}k=b.serialize("tb_options_animation",!0);for(n in k)this.values[n]=k[n];b=b.serialize("tb_options_visibility",!0);for(n in b)this.values[n]=b[n];"visual"===m.mode&&("hide_all"===b.visibility_all||"hide"===b.visibility_desktop||"hide"===b.visibility_tablet||"hide"===b.visibility_tablet_landscape||"hide"===b.visibility_mobile?g[0].classList.add("tb_visibility_hidden"):g[0].classList.remove("tb_visibility_hidden"))}this.setStylingValues(m.activeBreakPoint);
var n={};n[f]=q.extend(!0,{},m.Utils.clear(this.values));m.activeModel.set(n,{silent:!0});c&&(this.is_new&&(d=g.closest(".module_column"),d.closest(".module_row").removeClass("tb_row_empty"),d.closest(".module_subrow").removeClass("tb_row_empty"),d=A.clone(d)),m.Instances.Builder[m.builderIndex].removeLayoutButton());if("visual"===m.mode){var t=q.extend(!0,{},m.liveStylingInstance.undoData);g[0].classList.remove("tb_visual_hover");g.find(".tb_visual_hover").removeClass("tb_visual_hover")}m.ActionBar.hoverCid===
m.activeModel.cid&&(m.ActionBar.hoverCid=null,m.ActionBar.clearSelected());m.undoManager.push(m.activeModel.cid,m.beforeEvent,g,"save",{bsettings:e,asettings:this.values,styles:t,column:d})}A.Lightbox.close(a);m.beforeEvent=null;m.saving=!1}return!0},resetStyling:function(a,b){a.preventDefault();a.stopPropagation();b=!0===b?h:q("#tb_options_styling",ThemifyBuilderCommon.Lightbox.$lightbox)[0];var c=m.activeModel.get("elType");"module"===c&&(c=m.activeModel.get("mod_name"));if(!this.beforeData&&(this.beforeData=
q.extend(!0,{},this.values),b!==h)){var d=this;y.body.one("themify_builder_lightbox_before_close",function(){d.beforeData=null})}if(!1===m.GS.isGSPage&&null===m.GS.activeGS){var e=null;if(null!==m.GS.el){var f=m.GS.el.getElementsByClassName("tb_selected_style");e=[];for(var g=f.length-1;-1<g;--g)e.push(f[g].getAttribute("data-style-id"))}else this.values[m.GS.key]!==h&&("visual"===m.mode&&(e=this.values[m.GS.key].split(" ")),delete this.values[m.GS.key]);if(null!==e){null!==m.GS.field&&(m.GS.field.value=
"");m.GS.isGSPage=!0;for(g=e.length-1;-1<g;--g)m.GS.delete(e[g]);m.GS.isGSPage=!1;e=null;m.GS.generateValues(null,{},!0)}}e=ThemifyStyles.getStyleOptions(c);if("visual"===m.mode){var k={},n={},l=m.liveStylingInstance.prefix,p=this.breakpointsReverse;for(g=p.length-1;-1<g;--g){f=ThemifyStyles.getSheet(p[g],null!==m.GS.activeGS);var w=f.cssRules?f.cssRules:f.rules;if(0<w.length)for(k[p[g]]===h&&(k[p[g]]={},n[p[g]]={}),f=w.length-1;-1<f;--f)if(-1!==w[f].selectorText.indexOf(l)){var u=w[f].cssText.split("{")[1].split(";");
k[p[g]][f]===h&&(k[p[g]][f]={},n[p[g]][f]={});for(var x=u.length-2;-1<x;--x){var v=u[x].trim().split(": ")[0].trim();if(w[f].style[v]!==h){var C=w[f].style[v];k[p[g]][f][v]=C;n[p[g]][f][v]={a:"",b:C};w[f].style[v]=""}}}}"module"!==c&&(m.liveStylingInstance.removeBgSlider(),m.liveStylingInstance.removeBgVideo(),m.liveStylingInstance.getComponentBgOverlay().remove(),m.liveStylingInstance.bindBackgroundMode("repeat","background_repeat"),m.liveStylingInstance.bindBackgroundMode("repeat","b_r_h"),m.liveStylingInstance.$liveStyledElmt[0].removeAttribute("data-tb_slider_videos"),
m.liveStylingInstance.$liveStyledElmt.children(".tb_slider_videos,.tb_row_frame").remove())}for(g in this.values)c=-1!==g.indexOf("_color")?"color":-1!==g.indexOf("_style")?"style":!1,f=null,0===g.indexOf("breakpoint_")||g===m.GS.key||e[g]!==h||-1!==g.indexOf("_apply_all")?f=!0:-1!==g.indexOf("_unit")?(c=g.replace(/_unit$/ig,"",""),e[c]!==h&&(f=!0)):-1!==g.indexOf("_w")?(c=g.replace(/_w$/ig,"",""),e[c]!==h&&"font_select"===e[c].type&&(f=!0)):!1!==c&&(c=g.replace("_"+c,"_width"),e[c]!==h&&"border"===
e[c].type&&(f=!0)),!0===f&&delete this.values[g];e=null;if(b!==h){m.hasChanged=!0;c=b.getElementsByClassName("tb_lb_option");for(g=c.length-1;-1<g;--g)if(e=c[g].value,f=c[g].classList,"px"!==e&&"solid"!==e&&"default"!==e&&"linear"!==e&&"n"!==e&&!f.contains("exclude-from-reset-field"))if(l=c[g].getAttribute("id"),this.values[l]!==h&&delete this.values[l],f.contains("tb_radio_input_container"))f.contains("tb_icon_radio")?(e=b.querySelector('[name="'+l+'"]:checked'),null!==e&&e.parentNode.click()):(e=
b.querySelector('[name="'+l+'"]'),!0!==e.checked&&(e.checked=!0,y.triggerEvent(e,"change")));else if(f.contains("tb_uploader_input"))e&&c[g].parentNode.getElementsByClassName("tb_clear_input")[0].click();else if(f.contains("minicolors-input"))f=c[g].closest(".minicolors"),l=f.getElementsByClassName("tb_clear_btn")[0],e&&(c[g].value="",c[g].removeAttribute("data-opacity"),e=f.getElementsByClassName("minicolors-swatch-color")[0],e.style.opacity=e.style.backgroundColor="",f.nextElementSibling.value=
""),l!==h&&(l.style.display="none");else if(e&&"SELECT"===c[g].tagName){if(f.contains("font-family-select"))c[g].value="";else if(f.contains("font-weight-select")){for(c[g].value="";c[g].firstChild;)c[g].removeChild(c[g].firstChild);this.font_select.updateFontVariant("",c[g],this)}else if(f.contains("tb_unit"))c[g].value=f.contains("tb_frame_unit")?"%":"px";else{if("repeat"===e&&"background_repeat"===l||"scroll"===e&&"background_attachment"===l||"left top"===e&&"background_position"===l)continue;
c[g].selectedIndex=0}f.contains("themify-gradient-type")||y.triggerEvent(c[g],"change")}else if(f.contains("themify-layout-icon"))e=c[g].getElementsByClassName("tfl-icon")[0],e.classList.contains("selected")||e.click();else if(f.contains("tb_row_js_wrapper")){e=c[g].getElementsByClassName("tb_repeatable_field");for(f=e.length-1;-1<f;--f)e[f].parentNode.removeChild(e[f]);c[g].getElementsByClassName("add_new")[0].click()}else f.contains("themify-gradient-angle")?c[g].value="180":f.contains("themify-gradient")?
c[g].nextElementSibling.click():(c[g].value="",y.triggerEvent(c[g],f.contains("tb_range")?"keyup":"change"));"visual"!==m.mode||a.isTrigger||(m.liveStylingInstance.tempData=k,m.liveStylingInstance.undoData=n)}return n},resetEffect:function(a){a.preventDefault();a.stopPropagation();if(this.values.motion_effects!==h)for(var b in this.values.motion_effects)this.values.motion_effects[b].val={},this.values.motion_effects[b].val[b+"_dir"]="";b=a.target.previousElementSibling.querySelector("#motion_effects");
var c=b.querySelectorAll("select");for(a=c.length-1;-1<a;--a)c[a].selectedIndex=0;c=b.querySelectorAll(".tb_position_box_wrapper");for(a=c.length-1;-1<a;--a)c[a].querySelector("input").value="50,50",c[a].querySelector(".tb_position_box_handle").setAttribute("style","left:50%;top:50%;");b=b.querySelectorAll(".tb_slider_wrapper");for(a=b.length-1;-1<a;--a)b[a].querySelector(".tb_slider_label_u")?(b[a].querySelector("input").value="0,100",c=b[a].querySelectorAll(".ui-slider-handle"),c[0].setAttribute("style",
"left:0%;"),c[1].setAttribute("style","left:100%;"),b[a].querySelector(".ui-slider-range").setAttribute("style","left:0%;width:100%;"),b[a].querySelector(".tb_slider_label_l").textContent="0%",b[a].querySelector(".tb_slider_label_u").textContent="100%"):(b[a].querySelector("input").value="5",b[a].querySelector(".ui-slider-handle").setAttribute("style","left:50%;"),b[a].querySelector(".tb_slider_label_l").textContent="5")},create:function(a){var b=l.createDocumentFragment();if(a===h||0===a.length){a=
l.createElement("div");var c=l.createElement("p");c.textContent=themifyBuilder.i18n.no_op_module;a.appendChild(c);b.appendChild(a);return b}if("tabs"===a.type)b.appendChild(this.tabs.render(a,this));else for(c in a)if(!0!==a[c].hide&&a[c].type!==h){var d=a[c].type,e=this[d].render(a[c],this);if("separator"!==d&&"expand"!==d&&"group"!==d){var f=a[c].id;"tabs"!==d&&"multi"!==d&&("styling"===this.clicked?("visual"===m.mode&&a[c].prop!==h&&(this.styles[f]=q.extend(!0,{},a[c])),this.stylesData[f]=q.extend(!0,
{},a[c])):"visual"===m.mode&&"setting"===this.clicked&&this.values[f]!==h&&!0!==this.is_repeat&&(this.settings[f]=this.values[a[c].id],a[c].units!==h&&this.values[f+"_unit"]!==h&&(this.settings[f+"_unit"]=this.values[f+"_unit"])));if("builder"!==d){var g=l.createElement("div");g.className="tb_field";a[c].dc===h||a[c].dc||(g.className+=" tb_disable_dc");g.setAttribute("data-type",d);f!==h&&(g.className+=" "+f);a[c].wrap_class!==h&&(g.className+=" "+a[c].wrap_class);"custom_css"===d?g.appendChild(this.separator.render(a[c],
this)):"toggle_switch"===d?g.className+=" switch-wrapper":"slider"===d?g.className+=" tb_slider_options":"message"===d&&a[c].hideIf!==h&&new Function("return "+a[c].hideIf)?g.className+=" tb_hide_option":a[c].required!==h&&"setting"===this.clicked&&(f=a[c].required.message!==h?a[c].required.message:themifyBuilder.i18n.not_empty,g.setAttribute("data-validation",a[c].required.rule!==h?a[c].required.rule:"not_empty"),g.setAttribute("data-error-msg",f),g.className+=" tb_must_validate");"styling"===this.clicked&&
!1===a[c].is_responsive&&(g.className+=" responsive_disable");f=this.getTitle(a[c]);if(!1!==f){f=f.trim();var k=l.createElement("div"),n=l.createElement("span");k.className="tb_label";n.className="tb_label_text";n.textContent=f;k.appendChild(n);""===f&&(k.className+=" tb_empty_label");a[c].help!==h&&""!==a[c].label&&(k.classList.add("contains-help"),n.appendChild(this.help(a[c].help)));g.appendChild(k);"multi"!==d?(d=l.createElement("div"),d.className="tb_input",d.appendChild(e),g.appendChild(d)):
g.appendChild(e)}else g.appendChild(e);b.appendChild(g)}else b.appendChild(e)}else b.appendChild(e)}return b},tabs:{click:0,render:function(a,b){var c=a.options,d=l.createDocumentFragment(),e=l.createElement("ul"),f="styling"===b.clicked&&0===this.click&&"module"===b.component?l.createElement("div"):null,g=l.createElement("div"),k=a.isRadio!==h,n=null,t=null;g.className="tb_tabs";e.className="clearfix tb_tab_wrapper";++this.click;!0===k&&(b.values[a.id]!==h&&""!==b.values[a.id]&&(t=!0,n=b.values[a.id]),
e.className+=" tb_radio_input_container",!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id));for(var p in c){var w=l.createElement("li"),m=!0===k?l.createElement("label"):l.createElement("a"),x=l.createElement("div"),v="tb_"+this.click+"_"+p;x.id=v;x.className="tb_tab";m.textContent=c[p].label!==h?c[p].label:b.label[p];if(!0===k){var q=l.createElement("input");q.type="radio";q.className="tb_radio_tab_input";
q.name=a.id;n===p&&(q.checked=!0);q.value=p;m.setAttribute("href","#"+v);m.className="tb_radio_tab_label";m.appendChild(q)}else m.href="#"+v;null===t||n===p?(t=!0,w.className="current",x.appendChild(b.create(c[p].options)),x.style.display="block"):function(){var a=p;x.addEventListener("themify_builder_tabsactive",function D(d){this.appendChild(b.create(c[a].options));"setting"===b.clicked&&b.setUpEditors();b.callbacks();x.removeEventListener("themify_builder_tabsactive",D,{once:!0,passive:!0});a=
null},{once:!0,passive:!0})}();m.addEventListener("click",b.switchTabs);w.appendChild(m);e.appendChild(w);d.appendChild(x)}null!==f?(f.className="tb_styling_tab_nav",f.appendChild(e),g.appendChild(f)):g.appendChild(e);g.appendChild(d);setTimeout(b.callbacks.bind(b),5);return g}},group:{render:function(a,b){var c=l.createElement("div");a.wrap_class!==h&&(c.className+=" "+a.wrap_class);c.appendChild(b.create(a.options));return c}},builder:{render:function(a,b){b.is_repeat=!0;var c=l.createElement("div"),
d=l.createElement("a"),e=this;c.className="tb_row_js_wrapper tb_lb_option";a.wrap_class!==h&&(c.className+=" "+a.wrap_class);c.id=a.id;d.className="add_new tb_icon add";d.href="#";d.textContent=a.new_row!==h?a.new_row:b.label.new_row;if(b.values[a.id]!==h){for(var f=b.values[a.id].slice(),g=q.extend(!0,{},b.values),k=0,n=f.length;k<n;++k)b.values=f[k],c.appendChild(this.builderFields(a,b));b.values=g;g=f=null}else c.appendChild(this.builderFields(a,b));c.appendChild(d);b.afterRun.push(function(){e.sortable(c,
b);d.addEventListener("click",function(d){d.preventDefault();d.stopPropagation();b.is_repeat=!0;var f=e.builderFields(a,b);this.parentNode.insertBefore(f,this);setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();b.callbacks();y.triggerEvent(l,"tb_repeatable_add_new",[f]);f=null},5);b.control.preview(c,null,{repeat:!0});b.is_repeat=null})});b.is_repeat=null;return c},builderFields:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("div"),
g=l.createElement("ul"),k=l.createElement("li"),n=l.createElement("li"),h=l.createElement("div"),p=l.createElement("div"),w=this;c.className="tb_repeatable_field clearfix";d.className="tb_repeatable_field_top";e.className="row_menu";f.tabIndex="-1";f.className="menu_icon";g.className="tb_down";k.className="tb_duplicate_row";n.className="tb_delete_row";k.textContent=b.label.duplicate;n.textContent=b.label.delete;h.className="toggle_row";p.className="tb_repeatable_field_content";p.appendChild(b.create(a.options));
g.appendChild(k);g.appendChild(n);e.appendChild(f);e.appendChild(g);d.appendChild(e);d.appendChild(h);c.appendChild(d);c.appendChild(p);setTimeout(function(){d.addEventListener("click",function(d){d.stopPropagation();d.preventDefault();var e=d.target.classList;if(e.contains("tb_delete_row")){if(confirm(themifyBuilder.i18n.rowDeleteConfirm)){var f=d.target.closest(".tb_row_js_wrapper");w.delete(d.target);b.control.preview(f,null,{repeat:!0});y.triggerEvent(f,"delete")}}else if(e.contains("tb_duplicate_row")){b.is_repeat=
!0;d=q.extend(!0,{},b.values);b.values=m.Forms.serialize(c,!0,!0);var k=w.builderFields(a,b);c.parentNode.insertBefore(k,c.nextElementSibling);b.values=d;d=null;setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();b.callbacks();y.triggerEvent(c.parentNode,"duplicate");y.triggerEvent(l,"tb_repeatable_duplicate",[k]);k=null},5);b.control.preview(c,null,{repeat:!0});b.is_repeat=null}else e.contains("toggle_row")&&w.toggle(d.target);e.contains("menu_icon")||m.Utils.hideOnClick(g)})}.bind(this),
1500);return c},sortable:function(a,b){var c=q(a),d=!1,e={};c.sortable({items:".tb_repeatable_field",handle:".tb_repeatable_field_top",axis:"y",tolerance:"pointer",cursor:"move",cancel:".row_menu",start:_.debounce(function(b,c){if(tinyMCE!==h)for(b=a.getElementsByClassName("tb_lb_wp_editor"),c=b.length-1;-1<c;--c){var d=b[c].id;e[d]=tinymce.get(d).getContent();tinyMCE.execCommand("mceRemoveEditor",!1,d)}},300),stop:_.debounce(function(f,g){if(tinyMCE!==h){for(var k in e)tinyMCE.execCommand("mceAddEditor",
!1,k),tinymce.get(k).setContent(e[k]);e={}}d&&(g.item.removeClass("collapsed").find(".tb_repeatable_field_content").show(),d=!1);c.find(".tb_state_highlight").remove();b.control.preview(a,null,{repeat:!0});y.triggerEvent(a,"sortable")},300),beforeStart:function(a,b,e){m.Utils.hideOnClick(e.item[0].getElementsByClassName("tb_down")[0]);c.find(".tb_state_highlight").height(30);e.item[0].classList.contains("collapsed")||(e.item.addClass("collapsed").find(".tb_repeatable_field_content").hide(),d=!0,c.sortable("refresh"))}})},
toggle:function(a){q(a).closest(".tb_repeatable_field").toggleClass("collapsed").find(".tb_repeatable_field_content").slideToggle()},delete:function(a){a=a.closest(".tb_repeatable_field");y.triggerEvent(l,"tb_repeatable_delete",[a]);q(a).remove()}},accordion:{expand:function(a,b,c){a.addEventListener("click",function(a){var d=this.getElementsByClassName("tb_accordion_fields_options")[0];if(d===h){d=l.createElement("div");d.style.display="none";d.className="tb_toggleable_fields_options tb_accordion_fields_options";
c.is_repeat=!0;var f=this.parentNode.closest(".tb_accordion_fields").id,g=null,k=this.getAttribute("data-id");c.values[f]!==h&&c.values[f][k]!==h&&c.values[f][k].val!==h&&(g=q.extend(!0,{},c.values),c.values=c.values[f][k].val);d.appendChild(c.create(b.options));this.appendChild(d);"setting"===c.clicked&&c.setUpEditors();c.callbacks();null!==g&&(c.values=g);c.is_repeat=g=null}else if(d.contains(a.target))return;a.stopPropagation();a.preventDefault();this.classList.contains("tb_closed")?q(d).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):
q(d).slideUp(function(){this.parentNode.classList.add("tb_closed")})})},render:function(a,b){var c=this,d=l.createElement("ul");d.id=a.id;d.className="tb_toggleable_fields tb_accordion_fields tb_lb_option";"motion_effects"===a.id&&b.values&&b.values.hasOwnProperty("custom_parallax_scroll_speed")&&(b.values.hasOwnProperty("motion_effects")||(b.values.motion_effects={v:{val:{v_speed:b.values.custom_parallax_scroll_speed,v_dir:""}},h:{val:{}},t:{val:{t_speed:""}},r:{val:{}},s:{val:{}}},delete b.values.custom_parallax_scroll_speed),
b.values.hasOwnProperty("custom_parallax_scroll_reverse")?(b.values.motion_effects.v.val.v_dir="down",delete b.values.custom_parallax_scroll_reverse):b.values.motion_effects.v.val.v_dir="up",b.values.hasOwnProperty("custom_parallax_scroll_fade")&&(b.values.motion_effects.t.val.t_speed=b.values.custom_parallax_scroll_speed,delete b.values.custom_parallax_scroll_fade));var e=b.values[a.id],f=function(e,f){var g=l.createElement("li"),k=l.createElement("input"),n=l.createElement("div");n.textContent=
a.options[e].label;n.className="tb_toggleable_fields_title tb_accordion_fields_title";k.type="hidden";k.value="";g.className="tb_closed";g.setAttribute("data-id",e);f.val!==h&&(k.value=JSON.stringify(f.val));g.appendChild(k);g.appendChild(n);c.expand(g,a.options[e],b);d.appendChild(g)};if(e!==h)for(var g in e)a.options[g]!==h&&f(g,e[g]);for(g in a.options)e!==h&&e[g]!==h||f(g,a.options[g]);return d}},toggleable_fields:{sort:function(a,b){var c=q(a);c.sortable({items:">li",axis:"y",placeholder:"tb_state_highlight",
forcePlaceholderSize:!0,forceHelperSize:!0,cursor:"move",tolerance:"pointer",zIndex:9999,cancel:".tb_toggleable_fields_title,.switch-wrapper,.tb_toggleable_fields_options",stop:_.debounce(function(a,e){c.find(".tb_state_highlight").remove();b.control.preview(c[0],null,{repeat:!0});y.triggerEvent(c[0],"sortable")},300),start:function(a,b){c.sortable("refreshPositions")},beforeStart:function(a,b,f){c.sortable("refresh")}})},expand:function(a,b,c){a.addEventListener("click",function(a){if(this.classList.contains("tb_toggleable_field_disabled")||
null!==a.target.closest(".switch-wrapper"))null===a.target.closest(".tb_toggleable_fields_options")&&(d=this.getElementsByClassName("tb_toggleable_fields_options")[0],q(d).slideUp(function(){this.parentNode.classList.add("tb_closed")}));else{var d=this.getElementsByClassName("tb_toggleable_fields_options")[0];if(d===h){d=l.createElement("div");d.style.display="none";d.className="tb_toggleable_fields_options";this.appendChild(d);c.is_repeat=!0;var f=this.closest(".tb_toggleable_fields").id,g=null,
k=this.getAttribute("data-id");c.values[f]!==h&&c.values[f][k]!==h&&c.values[f][k].val!==h&&(g=q.extend(!0,{},c.values),c.values=c.values[f][k].val);d.appendChild(c.create(b.options));"setting"===c.clicked&&c.setUpEditors();c.callbacks();null!==g&&(c.values=g);c.is_repeat=g=null}else if(d.contains(a.target))return;a.stopPropagation();a.preventDefault();this.classList.contains("tb_closed")?q(d).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):q(d).slideUp(function(){this.parentNode.classList.add("tb_closed")})}})},
disable:function(a,b){var c=a.closest("li"),d=c.classList;a.checked?d.remove("tb_toggleable_field_disabled"):(d.add("tb_toggleable_field_disabled"),d.add("tb_closed"));b.control.preview(c.parentNode,null,{repeat:!0})},render:function(a,b){var c=this,d={type:"toggle_switch",id:"",options:{on:{name:"1",value:b.label.s},off:{name:"0",value:b.label.hi}},control:!1},e=l.createElement("ul");e.className="tb_toggleable_fields";!0===b.is_repeat?(e.dataset.inputId=a.id,e.className+=" tb_lb_option_child"):(e.id=
a.id,e.className+=" tb_lb_option");var f=b.is_repeat,g=b.values[a.id];b.is_repeat=!0;var k=function(f,g){d["default"]="1"===g.on?"on":"off";var k=l.createElement("li"),n=l.createElement("input"),t=l.createElement("div"),p=b.create([d]);t.textContent=a.options[f].label;t.className="tb_toggleable_fields_title";n.type="hidden";n.value="";k.className="tb_closed";"off"===d["default"]&&(k.className+=" tb_toggleable_field_disabled");k.setAttribute("data-id",f);g.val!==h&&(n.value=JSON.stringify(g.val));
p.querySelector(".toggle_switch").addEventListener("change",function(a){a.stopPropagation();c.disable(this,b)},{passive:!0});k.appendChild(n);k.appendChild(t);k.appendChild(p);c.expand(k,a.options[f],b);e.appendChild(k)};if(g!==h)for(var n in g)a.options[n]!==h&&k(n,g[n]);for(n in a.options)g[n]===h&&k(n,a.options[n]);b.is_repeat=f;b.afterRun.push(function(){c.sort(e,b)});return e}},sortable_fields:{getDefaults:function(a,b){var c=[{id:"icon",type:"icon",label:b.label.icon},{id:"before",type:"text",
label:b.label.b_t},{id:"after",type:"text",label:b.label.a_t}];b={date:[{id:"format",type:"select",label:b.label.d_f,"default":"def",options:{"F j, Y":b.label.F_j_Y,"Y-m-d":b.label.Y_m_d,"m/d/Y":b.label.m_d_Y,"d/m/Y":b.label.d_m_Y,def:b.label.def,custom:b.label.cus},binding:{not_empty:{hide:["custom"]},custom:{show:["custom"]}}},{id:"custom",type:"text",control:{event:"change"},label:b.label.cus_f,help:b.label.cus_fd_h}],time:[{id:"format",type:"select",label:b.label.t_f,"default":"def",options:{"g:i a":b.label.g_i_a,
"g:i A":b.label.g_i_A,"H:i":b.label.H_i,def:b.label.def,custom:b.label.cus},binding:{not_empty:{hide:["custom"]},custom:{show:["custom"]}}},{id:"custom",type:"text",control:{event:"change"},label:b.label.cus_f,help:b.label.cus_ft_h}],author:[{id:"l",type:"toggle_switch",label:b.label.l,options:"simple"},{id:"a_p",type:"toggle_switch",label:b.label.a_p,binding:{checked:{show:["p_s"]},not_checked:{hide:["p_s"]}},options:"simple"},{id:"p_s",type:"range",label:b.label.p_s,"class":"xsmall",units:{px:{min:0,
max:96}},control:{event:"change"}}],comments:[{id:"l",type:"toggle_switch",label:b.label.l,options:"simple"},{id:"no",type:"text",control:{event:"change"},label:b.label.no_c},{id:"one",type:"text",control:{event:"change"},label:b.label.one_c},{id:"comments",type:"text",control:{event:"change"},label:b.label.comments}],terms:[{id:"post_type",type:"query_posts",tax_id:"taxonomy"},{id:"l",type:"toggle_switch",label:b.label.l,options:"simple"},{id:"sep",type:"text",control:{event:"change"},label:b.label.sep}]};
if(b[a]!==h)for(var d=0,e=c.length;d<e;++d)b[a].push(c[d]);return b[a]},create:function(a,b,c,d,e,f){var g=l.createElement("li");g.textContent=b.options[c].label;g.setAttribute("data-type",c);if(!0===f){f=l.createElement("span");var k=l.createElement("input"),n=!1;k.type="hidden";if(d)e!==h&&(n=this.find(e,d));else{e!==h&&(n=this.find(e,c,!0));g.setAttribute("data-new",!0);b=A.Lightbox.$lightbox[0].getElementsByClassName(b.id)[0];var t=1;d=c+"_"+t;if(b!==h)for(;null!==b.querySelector('[data-id="'+
d+'"]');)++t,d=c+"_"+t}g.setAttribute("data-id",d);!1!==n&&e[n].val!==h&&(k.value=JSON.stringify(e[n].val));f.className="tb_sort_fields_remove";f.title=a.label["delete"];g.appendChild(k);g.appendChild(f)}return g},sort:function(a,b){var c=q(a);c.sortable({items:">li",appendTo:r.document.body,scroll:!1,containment:"parent",placeholder:"tb_state_highlight",cursor:"move",tolerance:"pointer",zIndex:9999,cancel:".tb_sort_fields_remove,.tb_sort_field_dropdown",stop:_.debounce(function(a,e){c.find(".tb_state_highlight").remove();
b.control.preview(c[0],null,{repeat:!0});y.triggerEvent(c[0],"sortable")},300),start:function(a,b){a=Math.floor(b.item.width()+1);b.item.width(a);c.find(".tb_state_highlight").width(a);c.sortable("refreshPositions")},beforeStart:function(a,b,f){f.item[0].classList.remove("current");c.sortable("refresh")}})},find:function(a,b,c){for(var d=a.length-1;-1<d;--d)if(a[d].id===b||!0===c&&b===a[d].type)return d;return!1},edit:function(a,b,c,d){var e=d.dataset.type,f=d.getElementsByClassName("tb_sort_field_dropdown")[0];
if(f===h){f=l.createElement("div");f.className="tb_sort_field_dropdown tb_sort_field_dropdown_"+e;var g=l.createElement("span");g.className="tb_sort_field_dropdown_pointer";f.appendChild(g);b=b.options[e].options;var k=d.dataset.id;g=null;b===h&&(b=this.getDefaults(e,a));a.is_repeat=a.is_sort=!0;if(c!==h){var n=d.dataset["new"]?!0:!1;e=this.find(c,!0===n?e:k,n);!1!==e&&c[e].val!==h&&(g=q.extend(!0,{},a.values),a.values=c[e].val)}f.appendChild(a.create(b));d.appendChild(f);a.callbacks();null!==g&&
(a.values=g);a.is_sort=a.is_repeat=g=null}if(!d.classList.contains("current")){var t=function(a){a=a.getElementsByClassName("tb_sort_field_dropdown");if(0<a.length){var b=a[0].getElementsByClassName("tb_sort_field_dropdown_pointer")[0];a[0].style.left="";b.style.left="";if(!0!==ThemifyBuilderCommon.Lightbox.dockMode.get()){var c=a[0].getBoundingClientRect(),d=ThemifyBuilderCommon.Lightbox.$lightbox[0].getElementsByClassName("tb_options_tab_content")[0].getBoundingClientRect(),e=c.left<d.left+5?"left":
c.right>d.right?"right":"";""!==e&&(c="left"===e?d.left+5-c.left:c.right-d.right,a[0].style.left="left"===e?"calc(50% + "+c+"px)":"calc(50% - "+c+"px)",b.style.left="left"===e?"calc(50% - "+c+"px)":"calc(50% + "+c+"px)")}}};d.classList.add("current");t(d);var p=function(a){1===a.which&&(a.target===d||d.contains(a.target)||Themify_Icons.target&&d.contains(Themify_Icons.target[0])&&"block"===this.getElementById("themify_lightbox_fa").style.display?(d.classList.add("current"),t(d)):(d.classList.remove("current"),
r.document.removeEventListener("mousedown",p,{passive:!0}),d=null))};r.document.removeEventListener("mousedown",p,{passive:!0});r.document.addEventListener("mousedown",p,{passive:!0})}},remove:function(a,b){b=b.closest("li");var c=b.parentNode;b.parentNode.removeChild(b);a.control.preview(c,null,{repeat:!0});y.triggerEvent(c,"delete")},render:function(a,b){var c=this,d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("div"),g=l.createElement("ul"),k=l.createElement("ul"),n=b.values[a.id].slice(0);
d.className="tb_sort_fields_wrap";k.className="tb_sort_fields_parent";!0===b.is_repeat?(k.dataset.inputId=a.id,k.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child"):(k.id=a.id,k.className+=" tb_lb_option");g.className="tb_ui_dropdown_items";e.className="tb_ui_dropdown_label tb_sort_fields_plus";e.tabIndex="-1";f.className="tb_sort_fields_plus_wrap";for(var h in a.options)g.appendChild(this.create(b,a,h));h=0;for(var p=n.length;h<p;++h)!0===b.is_new&&!0!==n[h].show||k.appendChild(this.create(b,
a,n[h].type,n[h].id,n,!0));f.appendChild(e);f.appendChild(g);d.appendChild(k);d.appendChild(f);k.addEventListener("click",function(d){d.target.classList.contains("tb_sort_fields_remove")?(d.preventDefault(),d.stopPropagation(),c.remove(b,d.target)):"LI"===d.target.tagName&&(d.preventDefault(),d.stopPropagation(),c.edit(b,a,n,d.target))});g.addEventListener("click",function(d){"LI"===d.target.tagName&&(d.preventDefault(),d.stopPropagation(),m.Utils.hideOnClick(g),k.appendChild(c.create(b,a,d.target.dataset.type,
null,n,!0)),b.control.preview(k,null,{repeat:!0}),q(k).sortable("refresh"))});b.afterRun.push(function(){c.sort(k,b);!0===b.is_new&&b.control.preview(k,null,{repeat:!0})});return d}},multi:{render:function(a,b){var c=l.createElement("div");c.className="tb_multi_fields tb_fields_count_"+a.options.length;c.appendChild(b.create(a.options));return c}},color:{is_typing:null,controlChange:function(a,b,c){var d=this,e=q(a),f=c.id,g=l.createElement("div");g.className="tb_clear_btn";g.addEventListener("click",
function(){g.style.display="none";a.value="";e.trigger("keyup")},{passive:!0});e.minicolors({opacity:1,swatches:themifyColorManager.toColorsArray(),changeDelay:10,beforeShow:function(){var a=A.Lightbox.$lightbox,b=e.closest(".minicolors"),c=b.find(".minicolors-panel");c.css("visibility","hidden").show();a.offset().left+a.width()<=c.offset().left+c.width()?b[0].classList.add("tb_minicolors_right"):b[0].classList.remove("tb_minicolors_right");c.css("visibility","").hide();m.hasChanged=!0},show:function(){themifyColorManager.initColorPicker()},
hide:function(){g.style.display=""!==a.value?"block":"none"},change:function(a,c){a?c&&("0.99"==c?c=1:0>=parseFloat(c)&&(c=0)):c="";d.is_typing||c===l.activeElement||(b.value=c);a&&0>=parseFloat(q(this).minicolors("opacity"))&&q(this).minicolors("opacity",0);"visual"===m.mode&&y.triggerEvent(this,"themify_builder_color_picker_change",{id:f,val:a?q(this).minicolors("rgbaString"):""})}}).minicolors("show");c=function(b){var c=parseFloat(this.value.trim().replace(",","."));if(1<c||isNaN(c)||""===c||
0>c)c=a.value?1:"";"blur"===b.type&&(this.value=c);d.is_typing="keyup"===b.type;e.minicolors("opacity",c)};b.addEventListener("blur",c,{passive:!0});b.addEventListener("keyup",c,{passive:!0});a.parentNode.appendChild(g);a.setAttribute("data-minicolors-initialized",!0)},setColor:function(a,b,c,d){var e=d,f="";""!==d&&(-1!==d.indexOf("_")?(m.Utils.toRGBA(d),d=d.split("_"),(f=d[1])?0>=parseFloat(f)&&(f=0):f=1,e=d[0]):(e=d,f=1),-1===e.indexOf("#")&&(e="#"+e));a.value=e;a.setAttribute("data-opacity",f);
b.style.background=e;b.style.opacity=f;c.value=f},update:function(a,b,c){a=r.document.getElementById(a);null!==a&&(c=a.parentNode,b===h&&(b=""),this.setColor(a,c.getElementsByClassName("minicolors-swatch-color")[0],c.nextElementSibling,b))},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("input"),g=l.createElement("input"),k=l.createElement("span"),n=l.createElement("span"),t=b.getStyleVal(a.id),p=this;d.className="minicolors_wrapper";
e.className="minicolors minicolors-theme-default";f.type="text";f.className="minicolors-input";a["class"]!==h&&(f.className+=" "+a.class);!0===b.is_repeat?(f.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",f.dataset.inputId=a.id):(f.id=a.id,f.className+=" tb_lb_option");k.className="minicolors-swatch";n.className="minicolors-swatch-color";g.type="text";g.className="color_opacity";k.appendChild(n);e.appendChild(f);e.appendChild(k);d.appendChild(e);d.appendChild(g);b.initControl(f,
a);k.addEventListener("click",function u(){d.insertAdjacentElement("afterbegin",f);e.parentNode.removeChild(e);p.controlChange(f,g,a);k.removeEventListener("click",u,{once:!0,passive:!0})},{once:!0,passive:!0});f.addEventListener("focusin",function x(){k.click();f.removeEventListener("focusin",x,{once:!0,passive:!0})},{once:!0,passive:!0});g.addEventListener("focusin",function(a){f.dataset.minicolorsInitialized?q(f).minicolors("show"):(f.dataset.opacity=this.value,k.click())},{passive:!0});t!==h&&
this.setColor(f,n,g,t);c.appendChild(d);a.after!==h&&c.appendChild(b.after(a));a.description!==h&&c.appendChild(b.description(a.description));a.tooltip!==h&&c.appendChild(b.tooltip(a.tooltip));return c}},text:{update:function(a,b,c){a=r.document.getElementById(a);null!==a&&(a.value=b!==h?b:"")},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("input"),e=b.getStyleVal(a.id);d.type=a.input_type!==h?a.input_type:"text";!0===b.is_repeat?(d.className=!0===b.is_sort?"tb_lb_sort_child":
"tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);a.placeholder!==h&&(d.placeholder=a.placeholder);if(a.custom_args!==h)for(var f in a.custom_args)d.setAttribute(f,a.custom_args[f]);e!==h&&(d.value=e);a["class"]!==h&&(d.className+=" "+a.class);c.appendChild(b.initControl(d,a));a.unit!==h&&c.appendChild(b.select.render(a.unit,b));a.after!==h&&c.appendChild(b.after(a));a.description!==h&&c.appendChild(b.description(a.description));a.tooltip!==h&&c.appendChild(b.tooltip(a.tooltip));
return c}},number:{render:function(a,b){a.input_type="number";a.custom_args===h&&(a.custom_args={min:0});a.step!==h&&(a.custom_args===h&&(a.custom_args={}),a.custom_args.step=a.step);return b.text.render(a,b)}},autocomplete:{cache:{},xhr:null,render:function(a,b){b=b.text.render(a,b);if(a.dataset===h)return b;var c=b.querySelector("input"),d=this,e=l.createElement("div");c.autocomplete="off";e.className="tb_autocomplete_container";b.appendChild(e);c.addEventListener("input",function(){var b=this.nextElementSibling;
for(b.style.display="none";null!==b.firstChild;)b.removeChild(b.firstChild);b.style.display="";var c=this.value,e=a.dataset,n=function(a){var c=l.createDocumentFragment(),d;for(d in a){var e=l.createElement("div");e.className="tb_autocomplete_item";e.setAttribute("data-value",d);e.innerText=a[d];c.appendChild(e)}b.appendChild(c);new SimpleBar(b)};d.cache[e]===h&&(d.cache[e]={});if(d.cache[e][c]!==h)n(d.cache[e][c]);else if(""!==c){null!==d.xhr&&d.xhr.abort();var t=this.parentNode;t.classList.add("tb_autocomplete_loading");
d.xhr=q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_autocomplete",dataset:e,value:c,nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},success:function(a){a.success&&(d.cache[e][c]=a.data,n(a.data))},complete:function(){d.xhr=null;t.classList.remove("tb_autocomplete_loading")}})}},{passive:!0});e.addEventListener("mousedown",function(a){if(1===a.which&&a.target.classList.contains("tb_autocomplete_item")){a.preventDefault();a.stopPropagation();var b=
this.previousElementSibling;b.value=a.target.getAttribute("data-value");b.blur();y.triggerEvent(b,"change")}});return b}},file:{_frames:{},clicked:null,browse:function(a,b,c,d){var e=this;a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=c.label.upload_image;var f=c.label.insert_image;if(e._frames[d]!==h)var k=e._frames[d];else k=wp.media.frames.file_frame=wp.media({title:a,library:{type:d},button:{text:f},multiple:!1}),e._frames[d]=k;k.off("select").on("select",function(){m.ActionBar.disable=
!0;var a=k.state().get("selection").first().toJSON();b.value=a.url;y.triggerEvent(b,"change");m.hasChanged=!0;q(b).trigger("change");var c=A.Lightbox.$lightbox.find("#"+b.id+"_id")[0];c!==h&&(c.value=a.id)});k.on("close",function(){m.ActionBar.disable=!0;setTimeout(function(){m.ActionBar.disable=null},5)});k.open()});"image"===d&&b.addEventListener("change",function(b){m.hasChanged=!0;e.setImage(a,this.value.trim())},{passive:!0})},setImage:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);
if(b){var c=l.createElement("img");c.width=40;c.height=40;c.src=b;a.appendChild(c)}},update:function(a,b,c){a=ThemifyBuilderCommon.Lightbox.$lightbox[0].querySelector("#"+a);null!==a&&(b===h&&(b=""),a.value=b,this.setImage(a.parentNode.getElementsByClassName("thumb_preview")[0],b))},render:function(a,b,c){var d=l.createElement("div"),e=l.createElement("input"),f=l.createElement("a"),g=l.createElement("span"),k=c.getStyleVal(b.id);e.type="text";e.className="tb_uploader_input";e.required=!0;e.setAttribute("pattern",
/.*\S.*/.source);e.setAttribute("autocomplete","off");if(!0===c.is_repeat){e.className+=!0===c.is_sort?" tb_lb_sort_child":" tb_lb_option_child";var n=Math.random().toString(36).substr(2,7);e.dataset.inputId=b.id}else e.className+=" tb_lb_option",n=b.id;e.id=n;k!==h&&(e.value=k);g.className="tb_clear_input";f.className="tb_media_uploader tb_upload_btn thumb_preview tb_plus_btn";f.href="#";f.dataset.libraryType=a;f.title=c.label.browse_image;d.className="tb_uploader_wrapper";d.appendChild(c.initControl(e,
b));d.appendChild(g);d.appendChild(f);"image"===a&&this.setImage(f,k);this.browse(f,e,c,a);b.after!==h&&d.appendChild(c.after(b));b.description!==h&&d.appendChild(c.description(b.description));b.tooltip!==h&&d.appendChild(c.tooltip(b.tooltip));if(null===this.clicked&&!0===c.is_new&&"setting"===c.clicked&&("image"===c.type||"pro-image"===c.type)){this.clicked=!0;var t=this;c.afterRun.push(function(){f.click();t.clicked=null})}return d}},image:{render:function(a,b){return b.file.render("image",a,b)}},
video:{render:function(a,b){return b.file.render("video",a,b)}},audio:{render:function(a,b){return b.file.render("audio",a,b)}},icon_radio:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();b.target!==a&&(b=b.target.closest("label").getElementsByTagName("input")[0],!0===b.checked?(b.checked=!1,b.value=h):(b.checked=!0,b.value=b.getAttribute("data-value")),m.hasChanged=!0,y.triggerEvent(b,"change"))})},render:function(a,b){return b.radioGenerate("icon_radio",
a)}},radio:{controlChange:function(a){var b=null;a.classList.contains("tb_radio_dnd")&&(b=a.closest(".tb_repeatable_field_content"));null===b&&(b=a.closest(".tb_tab"),null===b&&(b=a.closest(".tb_expanded_opttions"),null===b&&(b=A.Lightbox.$lightbox[0])));var c=a.parentNode.parentNode.getElementsByTagName("input");a=a.value;for(var d=c.length-1;-1<d;--d){var e=c[d].value;if(a!==e){e=b.getElementsByClassName("tb_group_element_"+e);for(var f=e.length-1;-1<f;--f)e[f].style.display="none"}}e=b.getElementsByClassName("tb_group_element_"+
a);for(f=e.length-1;-1<f;--f)e[f].style.display="block"},update:function(a,b,c){a=r.document.getElementById(a);if(null!==a){c=a.getElementsByTagName("input");for(var d=a.classList.contains("tb_icon_radio"),e=null,f=c.length-1;-1<f;--f)if(c[f].value===b){e=c[f];break}null===e&&(b=a.dataset["default"],b!==h&&(e=a.querySelector('[value="'+b+'"]')),!1===d&&null===e&&(e=c[0]));if(null!==e)e.checked=!0,!1===d&&a.classList.contains("tb_option_radio_enable")&&this.controlChange(e);else if(!0===d)for(f=c.length-
1;-1<f;--f)c[f].checked=!1}},render:function(a,b){return b.radioGenerate("radio",a)}},icon_checkbox:{render:function(a,b){return b.checkboxGenerate("icon_checkbox",a)}},checkbox:{update:function(a,b,c){c=r.document.getElementById(a);if(null!==c){a=c.getElementsByTagName("input");c=c.classList.contains("tb_option_checkbox_enable");b=b?b.split("|"):[];for(var d=a.length-1;-1<d;--d)a[d].checked=-1!==b.indexOf(a[d].value),!0===c&&this.controlChange(a[d])}},controlChange:function(a){var b=a.classList.contains("tb_radio_dnd")?
a.closest(".tb_repeatable_field_content"):A.Lightbox.$lightbox[0],c=a.parentNode.parentNode;a=c.getElementsByTagName("input");c=c.classList.contains("tb_option_checkbox_revert");for(var d=a.length-1;-1<d;--d)for(var e=b.getElementsByClassName("tb-checkbox_element_"+a[d].value),f=a[d].checked,g=e.length-1;-1<g;--g)!0===c&&!1===f||!1===c&&!0===f?e[g].classList.remove("_tb_hide_binding"):e[g].classList.add("_tb_hide_binding")},render:function(a,b){return b.checkboxGenerate("checkbox",a)}},radioGenerate:function(a,
b){var c=l.createDocumentFragment(),d=l.createElement("div");a="icon_radio"===a;var e=this.getOptions(b),f=b["default"]!==h?b.default:!1,g=this.getStyleVal(b.id),k=!0===b.option_js,n=this,t=null;d.className="tb_radio_input_container";d.setAttribute("tabIndex","-1");if(!0===k){var p=[];d.className+=" tb_option_radio_enable"}!0===a&&(d.className+=" tb_icon_radio",t=b.no_toggle===h);if(!0===this.is_repeat){d.className+=!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child";var m=Math.random().toString(36).substr(2,
7);d.dataset.inputId=b.id}else d.className+=" tb_lb_option",d.id=m=b.id;!1!==f?d.dataset["default"]=f:!1===a&&g===h&&(f=e[0].value);b.before!==h&&c.appendChild(l.createTextNode(b.before));for(var u=0,x=e.length;u<x;++u){var v=l.createElement("label"),q=l.createElement("input");q.type="radio";q.name=m;q.value=e[u].value;!0===a&&q.setAttribute("data-value",e[u].value);!0===this.is_repeat&&(q.className="tb_radio_dnd");b["class"]!==h&&(q.className+=!0===this.is_repeat?" "+b.class:b.class);!0===e[u].disable&&
(q.disabled=!0);if(g===e[u].value||g===h&&f===e[u].value)q.checked=!0,!0===k&&p.push(q);v.appendChild(q);!0===k&&q.addEventListener("change",function(){this.parentNode.parentNode.blur();n.radio.controlChange(this)},{passive:!0});if(!0===a){if(e[u].icon!==h){var z=l.createElement("span");z.className="tb_icon_wrapper";z.innerHTML=e[u].icon;v.insertAdjacentElement("beforeend",z)}e[u].label_class!==h&&(v.className+=e[u].label_class);e[u].name!==h&&(z=l.createElement("span"),z.className="themify_tooltip",
z.textContent=e[u].name,v.appendChild(z))}else e[u].name!==h&&(z=l.createElement("span"),z.textContent=e[u].name,v.appendChild(z));d.appendChild(v);b.new_line!==h&&d.appendChild(l.createElement("br"));this.initControl(q,b)}d.addEventListener("click",function(a){"LABEL"===a.target.parentNode.tagName&&this.blur()});c.appendChild(d);b.after!==h&&c.appendChild(n.after(b));b.description!==h&&c.appendChild(n.description(b.description));!0===a&&!0===t&&n.icon_radio.controlChange(d);!0===k&&this.radioChange.push(function(){for(var a=
0,b=p.length;a<b;++a)n.radio.controlChange(p[a]);p=null});return c},checkboxGenerate:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=this.getOptions(b);a="icon_checkbox"===a;var f=null,g=null,k=!0===b.option_js,n=b.new_line===h,t=this.getStyleVal(b.id);d.className="themify-checkbox";if(!0===k){var p=this,w=[];d.className+=" tb_option_checkbox_enable";b.reverse!==h&&(d.className+=" tb_option_checkbox_revert")}!0===this.is_repeat?(d.className+=!0===this.is_sort?" tb_lb_sort_child":
" tb_lb_option_child",d.dataset.inputId=b.id):(d.className+=" tb_lb_option",d.id=b.id);b.wrap_checkbox!==h&&(d.className+=" "+b.wrap_checkbox);t===h?b["default"]!==h&&(f=b["default"],g=Array.isArray(f)):t=!1!==t?t.split("|"):h;!0===a&&(d.className+=" tb_icon_checkbox");b.before!==h&&c.appendChild(l.createTextNode(b.before));for(var u=0,x=e.length;u<x;++u){var q=l.createElement("label"),r=l.createElement("input");r.type="checkbox";r.className="tb-checkbox";r.value=e[u].name;!0===this.is_repeat&&(r.className+=
!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child");b["class"]!==h&&(r.className+=" "+b.class);if(t!==h&&-1!==t.indexOf(e[u].name)||f===e[u].name||!0===g&&-1!==f.indexOf(e[u].name))r.checked=!0;!0===k&&(r.addEventListener("change",function(){p.checkbox.controlChange(this)},{passive:!0}),w.push(r));"hide_anchor"===b.id&&m.Utils.changeOptions(r,"hide_anchor");!1===n&&(q.className="pad-right");q.appendChild(r);if(!0===a){if(q.insertAdjacentHTML("beforeend",e[u].icon),e[u].value!==h){var z=l.createElement("span");
z.className="themify_tooltip";z.textContent=e[u].value;q.appendChild(z)}}else e[u].value!==h&&q.appendChild(l.createTextNode(e[u].value));d.appendChild(q);e[u].help!==h&&d.appendChild(this.help(e[u].help));!0===n&&d.appendChild(l.createElement("br"));this.initControl(r,b)}"hide_anchor"===b.id&&d.addEventListener("click",function(a){a.stopPropagation()});c.appendChild(d);b.after!==h&&(b.label!==h&&""!==b.label||b.help===h||""===b.help?c.appendChild(this.after(b)):(d.className+=" contains-help",d.appendChild(this.after(b))));
b.description!==h&&c.appendChild(this.description(b.description));!0===k&&this.afterRun.push(function(){for(var a=0,b=w.length;a<b;++a)p.checkbox.controlChange(w[a]);w=null});return c},date:{loaded:null,render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("input"),e=l.createElement("button"),f=this,g=function(){var b=r.jQuery.fn.themifyDatetimepicker?r.jQuery.fn.themifyDatetimepicker:r.jQuery.fn.datetimepicker;if(b){var c=a.picker!==h?a.picker:{};e.addEventListener("click",function(a){a.preventDefault();
a.stopPropagation();d.value="";d.dispatchEvent(new Event("change"));this.style.display="none"});b.call(q(d),{showButtonPanel:!0,changeYear:!0,dateFormat:c.dateformat||"yy-mm-dd",timeFormat:c.timeformat||"HH:mm:ss",stepMinute:5,stepSecond:5,controlType:c.timecontrol||"select",oneLine:!0,separator:c.timeseparator||" ",onSelect:function(a){e.style.display=""===a?"none":"block";d.dispatchEvent(new Event("change"))},beforeShow:function(){r.document.getElementById("ui-datepicker-div").classList.add("themify-datepicket-panel")}})}};
d.type="text";d.className="themify-datepicker";!0===b.is_repeat?(d.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);d.readonly=!0;e.className="themify-datepicker-clear";e.textContent=b.label.clear_date;b.values[a.id]!==h&&(d.value=b.values[a.id]);a["class"]!==h&&(d.className+=" "+a.class);d.value||(e.style.display="none");c.appendChild(b.initControl(d,a));c.appendChild(e);a.after!==h&&c.appendChild(b.after(a));a.description!==
h&&c.appendChild(b.description(a.description));null===this.loaded?b.afterRun.push(function(){r.Themify.LoadCss(themifyBuilder.meta_url+"css/jquery-ui-timepicker.min.css",tbLocalScript.version);r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/datepicker.min.js",function(){r.Themify.LoadAsync(themifyBuilder.meta_url+"js/jquery-ui-timepicker.min.js",function(){f.loaded=!0;setTimeout(g,10)},tbLocalScript.version,null,function(){return r.jQuery.fn.themifyDatetimepicker!==h||r.jQuery.fn.datetimepicker!==
h})},tbLocalScript.version,null,function(){return r.jQuery.fn.datepicker!==h})}):b.afterRun.push(g);return c}},gradient:{controlChange:function(a,b,c,d,e,f,g,k,l){var n=a.getStyleVal(f.id);if(n===h||""===n)n=180;var p=!1,w=q(b),u=a.getStyleVal(c.id),x={angle:n,onChange:function(a,b){p&&(a=b="");"visual"===m.mode&&y.triggerEvent(c,"themify_builder_gradient_change",{val:b});c.value=a;m.hasChanged=!0},onInit:function(){b.style.display="block"}};u&&(x.gradient=u,c.value=u);f.value=n;l||w.ThemifyGradient(x);
var v=w.data("themifyGradient"),r=function(a){var b=f.parentNode;b.classList.contains("gradient-angle-knob")||(b=f);"radial"===a?(k.style.display=b.style.display="none",g.parentNode.style.display="inline-block"):(k.style.display=b.style.display="inline-block",g.parentNode.style.display="none")};l?(v.settings=q.extend({},v.settings,x),v.settings.type=a.getStyleVal(e.id),v.settings.circle=g.checked,v.isInit=!1,v.update(),v.isInit=!0):(d.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();
p=!0;v.settings.gradient=q.ThemifyGradient.default;v.update();p=!1}),e.addEventListener("change",function(a){a=this.value;v.setType(a);r(a)},{passive:!0}),g.addEventListener("change",function(){v.setRadialCircle(this.checked)},{passive:!0}),f.addEventListener("mousedown",function E(){q(this).knob({min:0,max:360,step:1,width:63,height:63,thickness:.45,cursor:!0,lineCap:"round",change:function(a){v.setAngle(Math.round(a))}});this.removeAttribute("style");var a=this.parentNode;a.classList.add("gradient-angle-knob");
a.removeAttribute("style");a.insertAdjacentElement("afterbegin",this);this.addEventListener("change",function(){var a=parseInt(this.value);a||(a=0);v.setAngle(a)},{passive:!0});f.removeEventListener("mousedown",E,{once:!0,passive:!0})},{once:!0,passive:!0}));r(a.getStyleVal(e.id))},update:function(a,b,c){var d=a+"-gradient";b=r.document.getElementById(d);if(null!==b){var e=r.document.getElementById(d+"-angle");d=r.document.getElementById(d+"-type");a=r.document.getElementById(a+"-circle-radial");
var f=a.previousElementSibling;this.controlChange(c,b.previousElementSibling,b,null,d,e,a.getElementsByClassName("tb-checkbox")[0],f,!0)}},render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("select"),f=["linear","radial"],g=l.createElement("input"),k=l.createElement("span"),n=l.createElement("div"),t=l.createElement("input"),p=l.createElement("a");c.className="themify-gradient-field";a.option_js!==h&&(c.className+=" tb_group_element_gradient");d.className=
"selectwrapper";e.className="tb_lb_option themify-gradient-type";e.id=a.id+"-gradient-type";g.type="text";g.className="xsmall tb_lb_option themify-gradient-angle";g.id=a.id+"-gradient-angle";g.autocomplete="off";g.value=180;k.textContent=b.label.rotation;n.className="tb_gradient_container";n.tabIndex=-1;t.type="hidden";t.className="themify-gradient tb_lb_option";t.dataset.id=a.id;t.id=a.id+"-gradient";p.className="tb_clear_gradient ti-close";p.href="#";p.title=b.label.clear_gradient;for(var m=0;2>
m;++m){var u=l.createElement("option");u.value=f[m];u.textContent=b.label[f[m]];e.appendChild(u)}d.appendChild(e);c.appendChild(d);c.appendChild(g);c.appendChild(k);c.appendChild(b.checkboxGenerate("checkbox",{id:a.id+"-circle-radial",options:[{name:"1",value:b.label.circle_radial}]}));c.appendChild(n);c.appendChild(t);c.appendChild(p);var q=this;b.initControl(t,a);b.afterRun.push(function(){q.controlChange(b,n,t,p,e,g,c.getElementsByClassName("tb-checkbox")[0],k)});return c}},fontColor:{update:function(a,
b,c){c.radio.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isFontColor=!0;var c={id:a.id,type:"radio",option_js:!0,isFontColor:!0,options:[{value:a.s+"_solid",name:b.label.solid},{value:a.g+"_gradient",name:b.label.gradient}]},d=b.radioGenerate("radio",c),e=d.querySelector(".tb_lb_option");c=q.extend(!0,{},a);c.label="";c.type="color";c.id=a.s;c.prop="color";c.wrap_class="tb_group_element_"+a.s+"_solid";var f=b.create([c]);c.id=a.g;c.wrap_class="tb_group_element_"+a.g+"_gradient";c.type="gradient";
c.prop="background-image";var g=b.create([c]);c=c=null;b.afterRun.push(function(){var a=e.parentNode.closest(".tb_field");a.parentNode.insertBefore(f,a.nextElementSibling);a.parentNode.insertBefore(g,a.nextElementSibling);g=f=e=null});return d}},imageGradient:{update:function(a,b,c){c.radio.update(a+"-type",c.getStyleVal(a+"-type"),c);c.file.update(a,b,c);c.gradient.update(a,b,c);a=r.document.getElementById(a);if(null!==a){b=a.closest(".tb_tab");a=b.getElementsByClassName("tb_image_options");b=b.getElementsByClassName("tb_gradient_image_color")[0].getElementsByClassName("minicolors-input")[0].id;
c.color.update(b,c.getStyleVal(b),c);for(var d=0;d<a.length;++d)b=a[d].getElementsByClassName("tb_lb_option")[0].id,c.select.update(b,c.getStyleVal(b),c)}},render:function(a,b){var c=l.createElement("div"),d=l.createElement("div");c.className="tb_image_gradient_field";d.className="tb_group_element_image";c.appendChild(b.radioGenerate("radio",{type:a.type,id:a.id+"-type",options:[{name:b.label.image,value:"image"},{name:b.label.gradient,value:"gradient"}],option_js:!0}));var e=q.extend(!0,{},a);e.type=
"image";e.class="xlarge";d.appendChild(b.file.render("image",q.extend(!0,{},e),b));c.appendChild(d);e.type="gradient";delete e.class;delete e.binding;c.appendChild(b.gradient.render(e,b));b.afterRun.push(function(){var a={wrap_class:"tb_group_element_image",type:"group",options:[]};e.prop="background-color";e.wrap_class="tb_gradient_image_color";e.label=b.label.bg_c;e.type="color";e.id=e.colorId;a.options.push(q.extend({},e));e.prop="background-mode";e.wrap_class="tb_image_options";e.label=b.label.b_r;
e.repeat=!0;e.type="select";e.id=e.repeatId;a.options.push(q.extend({},e));e.prop="background-position";e.wrap_class="tb_image_options";e.label=b.label.b_p;e.position=!0;e.type="position_box";e.id=e.posId;delete e.repeat;a.options.push(q.extend({},e));var c=d.parentNode.closest(".tb_field");c.parentNode.insertBefore(b.create([a]),c.nextElementSibling);e=null});return c}},layout:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();if(b.target!==a&&
(b=b.target.closest("a"),null!==b)){for(var c=this.getElementsByClassName("tfl-icon"),d=c.length-1;-1<d;--d)c[d].classList.remove("selected");b.classList.add("selected");m.hasChanged=!0;y.triggerEvent(this,"change",{val:b.id})}})},update:function(a,b,c){c=r.document.getElementById(a);if(null!==c){a=c.getElementsByClassName("tfl-icon");for(var d=a.length-1;-1<d;--d)b===a[d].id?a[d].classList.add("selected"):a[d].classList.remove("selected");b===h&&(b=c.dataset["default"],b=b===h?a[0]:b.querySelector("#"+
b),b.classList.add("selected"))}},render:function(a,b){var c=l.createElement("div"),d=b.getStyleVal(a.id),e=b.getOptions(a);!0===a.color&&!0===a.transparent&&(e=e.slice(),e.push({img:"transparent",value:"transparent",label:b.label.transparent}));c.className="themify-layout-icon";!0===b.is_repeat?(c.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",c.dataset.inputId=a.id):(c.className+=" tb_lb_option",c.id=a.id);a["class"]!==h&&(c.className+=" "+a.class);d===h&&(d=themifyBuilder.modules[b.type],
d=d!==h&&d.defaults!==h&&d.defaults[a.id]?d.defaults[a.id]:e[0].value);for(var f=0,g=e.length;f<g;++f){var k=l.createElement("a"),n=l.createElement("span");k.href="#";k.className="tfl-icon";k.id=e[f].value;d===e[f].value&&(k.className+=" selected");n.className="themify_tooltip";n.textContent=e[f].label;if("sprite"===a.mode&&-1===e[f].img.indexOf(".png")){var t=l.createElement("span");t.className="tb_sprite";-1!==e[f].img.indexOf("http")?t.style.backgroundImage="url("+e[f].img+")":t.className+=" tb_"+
e[f].img}else t=l.createElement("img"),t.alt=e[f].label,t.src=-1!==e[f].img.indexOf("http")?e[f].img:themifyBuilder.builder_url+"/img/builder/"+e[f].img;k.appendChild(t);k.appendChild(n);c.appendChild(k)}this.controlChange(c);"row"!==b.component||"row_width"!==a.id&&"row_height"!==a.id?b.initControl(c,a):m.Utils.changeOptions(c,a.type);return c}},layoutPart:{data:[],get:function(a){var b=this;q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_library_items",nonce:themifyBuilder.tb_load_nonce,
pid:themifyBuilder.post_ID},beforeSend:function(a){A.showLoader("show")},success:function(c){A.showLoader("hide");b.data=c;a()},error:function(){A.showLoader("error")}})},render:function(a,b){function c(){var c=b.values[a.id],e=null!==m.Forms.LayoutPart.id?m.Forms.LayoutPart.id.toString():null;p.appendChild(l.createElement("option"));for(var f=0,g=d.data.length;f<g;++f)if(e!==d.data[f].id.toString()){var k=l.createElement("option");k.value=d.data[f].post_name;k.textContent=d.data[f].post_title;c===
d.data[f].post_name&&(k.selected=!0);p.appendChild(k)}p=null}var d=this,e=l.createDocumentFragment(),f=b.select.render(a,b),g=l.createElement("a"),k=l.createElement("a"),h=l.createElement("span"),t=l.createElement("span"),p=f.querySelector("select");0===d.data.length?d.get(c):c();e.appendChild(f);f=null;g.target=k.target="_blank";g.className=k.className="add_new";g.href=a.edit_url;k.href=a.add_url;h.className="tb_icon add";t.className="tb_icon ti-folder";g.appendChild(t);g.appendChild(l.createTextNode(b.label.mlayout));
k.appendChild(h);k.appendChild(l.createTextNode(b.label.nlayout));e.appendChild(l.createElement("br"));e.appendChild(k);e.appendChild(g);return e}},separator:{render:function(a,b){var c=b.label[a.label]!==h?b.label[a.label]:a.label;if(c!==h){b=a.wrap_class!==h?l.createElement("div"):l.createDocumentFragment();var d=l.createElement("h4");d.textContent=c;b.appendChild(l.createElement("hr"));b.appendChild(d)}else a.html!==h?(b=l.createElement("div"),b.innerHTML=a.html,b=b.firstChild):b=l.createElement("hr");
a.wrap_class!==h&&(b.className=a.wrap_class);return b}},multiColumns:{render:function(a,b){for(var c=[],d=[{id:a.id+"_gap",label:b.label.c_g,type:"range",prop:"column-gap",selector:a.selector,wrap_class:"tb_multi_columns_wrap",units:{px:{min:0,max:500}}},{type:"multi",wrap_class:"tb_multi_columns_wrap",label:b.label.c_d,options:[{type:"color",id:a.id+"_divider_color",prop:"column-rule-color",selector:a.selector},{type:"range",id:a.id+"_divider_width",class:"tb_multi_columns_width",prop:"column-rule-width",
selector:a.selector,units:{px:{min:0,max:500}}},{type:"select",id:a.id+"_divider_style",options:b.static.border,prop:"column-rule-style",selector:a.selector}]}],e=0;7>e;++e)c[e]=0===e?"":e;a.options=c;c=null;a=q.extend(!0,{},a);a.type="select";a=b.select.render(a,b);var f=a.querySelector("select");b.afterRun.push(function(){var a=f.closest(".tb_field");a.parentNode.insertBefore(b.create(d),a.nextElementSibling)});return a}},expand:{render:function(a,b){var c=l.createElement("fieldset"),d=l.createElement("div"),
e=l.createElement("div"),f=l.createElement("i"),g=b.label[a.label]!==h?b.label[a.label]:a.label;c.className="tb_expand_wrap";e.className="tb_style_toggle tb_closed";d.className="tb_expanded_opttions";f.className="ti-angle-up";e.appendChild(l.createTextNode(g));e.appendChild(f);c.appendChild(e);c.appendChild(d);e.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();this.dataset.done===h&&(this.dataset.done=!0,d.appendChild(b.create(a.options)),"setting"===b.clicked&&
b.setUpEditors(),b.callbacks(),y.body.triggerHandler("tb_options_expand",[d]));this.classList.contains("tb_closed")?this.classList.remove("tb_closed"):this.classList.add("tb_closed")});return c}},gallery:{file_frame:null,cache:{},init:function(a,b){var c=wp.media.gallery.shortcode,d=this,e=b.value.trim(),f=function(a,c){var d=l.createElement("div"),e=b.parentNode.getElementsByClassName("tb_shortcode_preview")[0];d.className="tb_shortcode_preview";e!==h&&e.parentNode.removeChild(e);e=0;for(var f=a.length;e<
f;++e){var g=l.createElement("img");g.width=g.height=50;if(!0===c)g.src=a[e];else{var k=a[e].attributes;g.src=k.sizes.thumbnail?k.sizes.thumbnail.url:k.url}d.appendChild(g)}b.parentNode.insertBefore(d,b.nextElementSibling)};0<e.length&&(this.cache[e]!==h?f(this.cache[e],!0):q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_shortcode_preview",tb_load_nonce:themifyBuilder.tb_load_nonce,shortcode:e},success:function(a){f(a,!0);d.cache[e]=a}}));a.addEventListener("click",
function(a){a.preventDefault();a.stopPropagation();null===d.file_frame?(d.file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"gallery-library",library:{type:"image"},title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),d.file_frame.el.classList.add("themify_gallery_settings")):d.file_frame.options.selection.reset();wp.media.gallery.shortcode=function(a){var b=a.props.toJSON(),d=_.pick(b,"orderby","order");a.gallery&&_.extend(d,a.gallery.toJSON());d.ids=a.pluck("id");
b.uploadedTo&&(d.id=b.uploadedTo);d._orderbyRandom&&(d.orderby="rand",delete d._orderbyRandom);d.ids&&"post__in"===d.orderby&&delete d.orderby;for(var e in wp.media.gallery.defaults)wp.media.gallery.defaults[e]===d[e]&&delete d[e];delete d._orderByField;a=new r.wp.shortcode({tag:"gallery",attrs:d,type:"single"});wp.media.gallery.shortcode=c;return a};a=b.value.trim();0<a.length?(d.file_frame=wp.media.gallery.edit(a),d.file_frame.state("gallery-edit")):(d.file_frame.state("gallery-library"),d.file_frame.open(),
d.file_frame.$el.find(".media-menu .media-menu-item").last().trigger("click"));a=function(a){var c=wp.media.gallery.shortcode(a).string().slice(1,-1);b.value="["+c+"]";f(a.models);y.triggerEvent(b,"change");m.hasChanged=!0};d.file_frame.off("update",a).on("update",a)})},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("a"),e=this,f=a.class!==h?a.class:"";d.href="#";d.className="builder_button tb_gallery_btn";d.textContent=b.label.add_gallery;a.class=f+" tb_shortcode_input";
c.appendChild(b.textarea.render(a,b));c.appendChild(d);b.afterRun.push(function(){e.init(d,d.previousElementSibling);!0===b.is_new&&"gallery"===b.type&&"setting"===b.clicked&&d.click()});return c}},textarea:{render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("textarea"),e=b.getStyleVal(a.id);!0===b.is_repeat?(d.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);d.className+=" "+(a["class"]!==h?a.class:
"xlarge");e!==h&&(d.value=e);a.rows!==h&&(d.rows=a.rows);c.appendChild(b.initControl(d,a));a.after!==h&&c.appendChild(b.after(a));a.description!==h&&c.appendChild(b.description(a.description));return c}},address:{render:function(a,b){return b.textarea.render(a,b)}},wp_editor:{render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("button"),g=l.createElement("span"),k=l.createElement("div"),n=l.createElement("button"),t=l.createElement("button"),
p=l.createElement("div"),m=l.createElement("div"),u=l.createElement("textarea");c.className="wp-core-ui wp-editor-wrap tmce-active";u.className="tb_lb_wp_editor fullwidth";if(!0===b.is_repeat){var q=Math.random().toString(36).substr(2,7);u.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child";u.dataset.inputId=a.id;!1!==a.control&&(a.control===h&&(a.control={}),a.control.repeat=!0)}else u.className+=" tb_lb_option",q=a.id;u.id=q;c.id="wp-"+q+"-wrap";d.id="wp-"+q+"-editor-tools";d.className=
"wp-editor-tools";e.id="wp-"+q+"-media-buttons";e.className="wp-media-buttons";f.type="button";f.className="button insert-media add_media";g.className="wp-media-buttons-icon";k.className="wp-editor-tabs";n.type="button";n.className="wp-switch-editor switch-tmce";n.id=q+"-tmce";n.dataset.wpEditorId=q;n.textContent=b.label.visual;t.type="button";t.className="wp-switch-editor switch-html";t.id=q+"-html";t.dataset.wpEditorId=q;t.textContent=b.label.text;p.id="wp-"+q+"-editor-container";p.className="wp-editor-container";
m.id="qt_"+q+"_toolbar";m.className="quicktags-toolbar";a["class"]!==h&&(u.className+=" "+a.class);b.values[a.id]!==h&&(u.value=b.values[a.id]);u.rows=12;u.cols=40;p.appendChild(u);p.appendChild(m);k.appendChild(n);k.appendChild(t);f.appendChild(g);f.appendChild(l.createTextNode(b.label.add_media));e.appendChild(f);d.appendChild(e);d.appendChild(k);c.appendChild(d);c.appendChild(p);b.editors.push({el:u,data:a});return c}},select:{dataset_cache:{},update:function(a,b,c){a=r.document.getElementById(a);
null!==a&&(b!==h?a.value=b:a[0]!==h&&(a[0].selected=!0))},make_options:function(a,b,c){var d=l.createDocumentFragment();c=c.getOptions(a);for(var e in c){var f=l.createElement("option");f.value=e;f.text=c[e];h!==a.binding&&h!==a.binding[e]&&h!==a.binding[e].responsive&&h!==a.binding[e].responsive.disabled&&-1!==a.binding[e].responsive.disabled.indexOf(a.id)&&(f.className="responsive_disable");if(b===e||b===h&&e===a.default)f.selected=!0;d.appendChild(f)}return d},render:function(a,b){var c=this,d=
l.createElement("div"),e=l.createElement("select"),f=l.createDocumentFragment(),g=b.getStyleVal(a.id);d.className="selectwrapper";!0===b.is_repeat?(e.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",e.dataset.inputId=a.id):(e.className="tb_lb_option",e.id=a.id);a["class"]!==h&&(e.className+=" "+a.class);var k=function(a){if(a.optgroup){a=b.getOptions(a);for(var d in a)if(a[d].label!==h){var f=l.createElement("optgroup");f.setAttribute("label",a[d].label);f.appendChild(c.make_options(a[d],
g,b));e.appendChild(f)}else e.appendChild(c.make_options(a[d],g,b))}else e.appendChild(c.make_options(a,g,b))};a.dataset!==h?c.dataset_cache[a.dataset]!==h?k(c.dataset_cache[a.dataset]):q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_select_dataset",dataset:a.dataset,nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend:function(a){A.showLoader("show")},success:function(b){b.success&&(A.showLoader("hide"),c.dataset_cache[a.dataset]=b.data,k(b.data))},
error:function(){A.showLoader("error")}}):k(a);d.appendChild(b.initControl(e,a));f.appendChild(d);a.after!==h&&f.appendChild(b.after(a));a.description!==h&&f.appendChild(b.description(a.description));a.tooltip!==h&&f.appendChild(b.tooltip(a.tooltip));return f}},font_select:{loaded_fonts:[],fonts:[],safe:[],google:[],cf:[],updateFontVariant:function(a,b,c,d){if(b)if(d=""===d||d===h?h!==this.google[a]?"google":"cf":d,d="webfont"===d?"fonts":d,this[d][a]===h||this[d][a].v===h)b.closest(".tb_field").classList.add("_tb_hide_binding");
else{var e=this[d][a].v;c=c.getStyleVal(b.id);c=h===c?"google"===d?"regular":"normal":c;for(b.dataset.selected=a;null!==b.firstChild;)b.removeChild(b.firstChild);b.closest(".tb_field").classList.remove("_tb_hide_binding");a=0;for(d=e.length;a<d;++a){var f=l.createElement("option");f.value=f.textContent=e[a];e[a]===c&&(f.selected=!0);b.appendChild(f)}}},loadGoogleFonts:function(a,b){a=q.unique(a.split("|"));for(var c={google:[],cf:[]},d=[],e=this,f=a.length-1;-1<f;--f)if(a[f]&&-1===this.loaded_fonts.indexOf(a[f])&&
(-1===c.google.indexOf(a[f])||-1===c.cf.indexOf(a[f]))){var g=a[f].split(":"),k="regular"===g[1]||"normal"===g[1]||"italic"===g[1]||parseInt(g[1])?g[1]:"400,700";k=g[0].split(" ").join("+")+":"+k;-1===this.loaded_fonts.indexOf(k)&&(g=e.cf[g[0]]!==h?"cf":"google",k+="google"===g?":latin,latin-ext":"",c[g].push(k),d.push(k))}if("undefined"!==typeof WebFont){a=null;var l=function(){for(var a=d.length-1;-1<a;--a)-1===e.loaded_fonts.indexOf(d[a])&&e.loaded_fonts.push(d[a])};a={fontloading:function(a,b){l()},
fontinactive:function(a,b){l()}};0<c.google.length&&(a.google={families:c.google},WebFont.load(a),b&&(a.context=b,WebFont.load(a),delete a.context),delete a.google);0<c.cf.length&&(a.custom={families:c.cf,urls:[themifyBuilder.cf_api_url+c.cf.join("|")]},WebFont.load(a),b&&(a.context=b,WebFont.load(a)))}},controlChange:function(a,b,c,d){for(var e=this,f=q(a).comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",
disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div"),g=f[0].getElementsByClassName("themify-combo-item"),k=function(a){e.fonts.push(a);c.classList.remove("themify_show_wait")},h=g.length-1;-1<h;--h)g[h].addEventListener("click",function(b){var c=this.dataset.value;m.hasChanged=!0;if(c&&-1===e.loaded_fonts.indexOf(c)){b=a.querySelector('option[value="'+c+'"]');var f=b.dataset.type;if(null===
b||"webfont"!==f)b={classes:!1,fontloading:function(a,b){e.loaded_fonts.push(c)},fontinactive:function(a,b){e.loaded_fonts.push(c)}},"google"===f?b.google={families:[c]}:"cf"===f&&(b.custom={families:[c],urls:[themifyBuilder.cf_api_url+c]}),WebFont.load(b)}e.updateFontVariant(c,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],d,f);setTimeout(function(){y.triggerEvent(a,"change")},10)},{passive:!0}),g[h].addEventListener("mouseenter",function(){var d=this.dataset.value;if(d){var f=
q(this);if(f.is(":visible")&&("default"===d&&(d="inherit"),b.style.top=f.position().top+30+"px",b.style.fontFamily=d,b.style.display="block","inherit"!==d&&!this.classList.contains("tb_font_loaded"))){this.classList.add("tb_font_loaded");if(-1===e.fonts.indexOf(d))if(c.classList.add("themify_show_wait"),f=a.querySelector('option[value="'+d+'"]'),null===f||"webfont"!==f.dataset.type){var g={classes:!1,context:r,fontloading:function(a,b){k(d)},fontinactive:function(a,b){k(d)}};"google"===f.dataset.type?
g.google={families:[d]}:"cf"===f.dataset.type&&(g.custom={families:[d],urls:[themifyBuilder.cf_api_url+d]});WebFont.load(g)}else k(d);this.classList.add("tb_font_loaded");this.style.fontFamily=d}}},{passive:!0});g=null;f.trigger("comboselect:open").on("comboselect:close",function(){b.style.display="none"});f[0].getElementsByClassName("themify-combo-arrow")[0].addEventListener("click",function(){b.style.display="none"},{passive:!0})},update:function(a,b,c){a=r.document.getElementById(a);if(null!==
a)if(b===h&&(b=""),a.value=b,this.updateFontVariant(b,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],c),a.dataset.init===h){for(c=a.getElementsByTagName("optgroup");c[0].firstChild;)c[0].removeChild(c[0].firstChild);for(;c[1].firstChild;)c[1].removeChild(c[1].firstChild);a=l.createElement("option");a.value=b;a.selected=!0;this.safe[b]!==h?(a.textContent=this.safe[b],c[0].appendChild(a)):this.google[b]!==h?(a.textContent=this.google[b].n,c[1].appendChild(a)):this.cf[b]!==h?(a.textContent=
this.cf[b].n,c[2].appendChild(a)):(a.textContent=b,c[0].appendChild(a))}else a.parentNode.getElementsByClassName("themify-combo-input")[0].value=b},render:function(a,b){var c=l.createElement("div"),d=l.createElement("select"),e=l.createElement("span"),f=l.createElement("span"),g=l.createDocumentFragment(),k=l.createElement("option"),n=b.getStyleVal(a.id),m=this,p={safe:b.label.safe_fonts,google:b.label.google_fonts},q=1>Object.keys(this.cf).length;!1===q&&(p.cf=b.label.cf_fonts);c.className="tb_font_preview_wrapper";
d.className="tb_lb_option font-family-select";d.id=a.id;e.className="tb_font_preview";f.textContent=b.label.font_preview;k.value="";k.textContent="---";g.appendChild(k);a["class"]!==h&&(d.className+=" "+a.class);k=["google","safe"];!1===q&&k.push("cf");for(var u=k.length-1;-1<u;--u){var x=l.createElement("optgroup");x.label=p[k[u]];if(n!==h){var v=l.createElement("option");v.value=n;v.selected=!0;v.textContent="cf"===k[u]&&this.cf[n]!==h?this.cf[n].n:"safe"===k[u]&&this.safe[n]!==h?this.safe[n]:"google"===
k[u]&&this.google[n]!==h?this.google[n].n:h!==this.cf[n]?this.cf[n].n:n;x.appendChild(v)}g.appendChild(x)}c.addEventListener("focusin",function z(){var a=m.safe,g=l.createDocumentFragment(),k=d.getElementsByTagName("optgroup");d.dataset.init=!0;if(n!==h)for(var p=k.length-1;-1<p;--p)for(;k[p].firstChild;)k[p].removeChild(k[p].firstChild);for(var t in a)p=l.createElement("option"),p.value=t,p.textContent=a[t],p.dataset.type="webfont",n===t&&(p.selected=!0),g.appendChild(p);k[q?0:1].appendChild(g);
var u=["google"];!1===q&&u.unshift("cf");for(var w=u.length-1;-1<w;--w){a=m[u[w]];g=l.createDocumentFragment();for(t in a)p=l.createElement("option"),p.value=t,p.dataset.type=u[w],p.textContent=a[t].n,n===t&&(p.selected=!0),g.appendChild(p);k["cf"===u[w]?0:q?1:2].appendChild(g)}m.controlChange(d,e,f,b);c.removeEventListener("focusin",z,{once:!0,passive:!0})},{once:!0,passive:!0});d.appendChild(g);e.appendChild(f);c.appendChild(b.initControl(d,a));c.appendChild(e);b.afterRun.push(function(){var d=
b.create([{type:"select",label:"f_w",selector:a.selector,class:"font-weight-select",id:a.id+"_w",prop:"font-weight"}]),e=c.closest(".tb_field"),f=d.querySelector(".tb_field");e.parentNode.insertBefore(d,e.nextElementSibling);m.updateFontVariant(n,f.querySelector(".font-weight-select"),b)});return c}},animation_select:{render:function(a,b){var c=l.createElement("div"),d=b.static.preset_animation,e=l.createElement("select");b=b.values[a.id];c.className="selectwrapper";e.className="tb_lb_option";e.id=
a.id;e.appendChild(l.createElement("option"));for(var f in d){a=l.createElement("optgroup");a.label=f;for(var g in d[f]){var k=l.createElement("option");k.value=g;k.text=d[f][g];b===g&&(k.selected=!0);a.appendChild(k)}e.appendChild(a)}c.appendChild(e);return c}},select_menu:{data:null,get:function(a,b){var c=this,d=function(){for(var d in c.data){var f=l.createElement("option");f.value=c.data[d].slug;f.text=c.data[d].name;f.dataset.termid=c.data[d].term_id;b===c.data[d].slug&&(f.selected=!0);a.appendChild(f)}};
null===c.data?q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_menu",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){c.data=a;d()}}):d()},render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=l.createElement("select"),f=l.createElement("small"),g=b.values[a.id];d.className="selectwrapper";e.className="select_menu_field";!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=
a.id):(e.className+=" tb_lb_option",e.id=a.id);a["class"]!==h&&(e.className+=" "+a.class);f.innerHTML=b.label.menu_help;var k=l.createElement("option");k.value="";k.text=b.label.select_menu;c.appendChild(k);this.get(e,g);d.appendChild(b.initControl(e,a));c=l.createDocumentFragment();c.appendChild(d);c.appendChild(l.createElement("br"));c.appendChild(f);return c}},sticky:{render:function(a,b){var c={},d=m.activeModel.get("element_id"),e=q.extend(!0,{},a);a=m.Utils.getUIDList(a.key);for(var f=0,g=a.length;f<
g;++f)if(a[f].element_id!==d){var k="row"===a[f].elType?"Row #"+a[f].element_id:a[f].mod_name+" #"+a[f].element_id;"row"===a[f].elType&&a[f].styling&&a[f].styling.custom_css_id?k="#"+a[f].styling.custom_css_id:"module"===a[f].elType&&a[f].mod_settings&&a[f].mod_settings.custom_css_id&&(k="#"+a[f].mod_settings.custom_css_id);c[a[f].element_id]=k}e.options=c;return b.select.render(e,b)}},selectSearch:{update:function(a,b,c,d){d=l.createDocumentFragment();var e=null;b.removeAttribute("data-value");b.value=
"";if(c!==h){for(var f in c){var g=l.createElement("div");null===e&&(e=f);g.dataset.value=f;g.className="tb_search_item";g.textContent=c[f];a===f&&(g.className+=" selected",b.setAttribute("data-value",f),b.value=c[f]);d.appendChild(g)}""===b.value&&null!==e&&(b.value=c[e],b.setAttribute("data-value",e))}return d},events:function(a,b){a.addEventListener("keyup",function(a){a=b.getElementsByClassName("tb_search_item");for(var c=this.value.trim(),e=new RegExp(c,"i"),f=0,g=a.length;f<g;++f)""===c||e.test(a[f].textContent)?
a[f].style.display="block":a[f].style.display="none"},{passive:!0});b.addEventListener("mousedown",function(b){if(1===b.which&&b.target.classList.contains("tb_search_item")){b.preventDefault();b.stopPropagation();var c=this.getElementsByClassName("tb_search_item");b=b.target;for(var e=c.length-1;-1<e;--e)c[e].classList.remove("selected");b.classList.add("selected");c=b.dataset.value;a.value=b.textContent;a.dataset.value=c;a.blur();a.previousElementSibling.blur();y.triggerEvent(a,"selectElement",{val:c})}})},
render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("input"),f=l.createElement("span"),g=l.createElement("div");c.className="tb_search_wrapper";e.className="tb_search_input";e.autocomplete="off";g.className="tb_search_container";!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id);a["class"]!==h&&(e.className+=" "+a["class"]);f.className="fa fa-spin fa-spinner";
g.tabIndex=1;d.tabIndex=1;d.className="tb_search_arrow";e.type="text";e.placeholder=(a.placeholder!==h?a.placeholder:a.label)+"...";g.appendChild(this.update(b.values[a.id],e,a.options,b));d.appendChild(f);c.appendChild(d);c.appendChild(b.initControl(e,a));c.appendChild(g);a.after!==h&&c.appendChild(b.after(a));a.description!==h&&c.appendChild(b.description(a.description));a.tooltip!==h&&c.appendChild(b.tooltip(a.tooltip));this.events(e,g);setTimeout(function(){new SimpleBar(g)},100);return c}},optin_provider:{cache:null,
render:function(a,b){var c=l.createElement("div"),d=this;null===this.cache?(A.showLoader("show"),q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_optin_get_settings",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){A.showLoader("spinhide");d.cache=a;c.appendChild(b.create(d.cache));b.callbacks()},error:function(){A.showLoader("error")}})):c.appendChild(b.create(d.cache));return c}},check_map_api:{render:function(a,b){return themifyBuilder[a.map+"_api"]?
l.createElement("span"):b.separator.render({type:"separator",html:"<span>"+themifyBuilder[a.map+"_api_err"]+"</span>",wrap_class:"tb_group_element_"+a.map},b)}},query_posts:{cacheTypes:null,cacheTerms:[],render:function(a,b){var c=this,d,e=a.description,f=a.after,g=b.values,k=function(a){var b=[],c;for(c in a)b[c]=a[c].name;return b},n=function(a,c,d){var e=a.nextElementSibling.getElementsByClassName("simplebar-content")[0];e===h&&(e=a.nextElementSibling);for(;e.firstChild;)e.removeChild(e.firstChild);
e.appendChild(b.selectSearch.update(c,a,d,b))},t=function(b,c,d){b.classList.add("tb_search_wait");return q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_post_types",tb_load_nonce:themifyBuilder.tb_load_nonce,type:d,v:c,exclude:a.exclude,all:a.all,just_current:a.just_current,id:themifyBuilder.post_ID},complete:function(){b.classList.remove("tb_search_wait")}})};(function(){var p=q.extend(!0,{},a),w=null;d=l.createElement("div");d.id=a.id?a.id:a.term_id;b.afterRun.push(function(){for(var q=
["id","tax_id","term_id","tag_id"],r=l.createDocumentFragment(),v=null,C=function(d,k){var p=function(){if(a.term_id!==h||a.tag_id!==h){var p=a.tag_id===h?a.term_id.replace("#tmp_id#",k):a.tag_id,t=d.closest(".tb_input"),q;d.id=p;null===v&&g[p]!==h&&(q=g[p].split("|")[0]);q||(q=0);n(d,q,c.cacheTerms[k]);if(null===v){p=l.createElement("input");var u=l.createElement("span"),r=l.createElement("div");u.innerHTML=b.label.or;p.type="text";p.className="query_category_multiple";r.className="tb_query_multiple_wrap";
r.appendChild(u);r.appendChild(p);t.insertBefore(r,t.nextSibling);f!==h&&t.appendChild(b.after(f));e!==h&&t.appendChild(b.description(e));if(a.slug_id!==h){u=t.parentNode;r=b.create([{type:"radio",id:"term_type",label:b.label.query_by,default:g.term_type===h&&"post_slug"===g[a.tax_id]?"post_slug":!1,option_js:!0,options:[{value:"all",name:b.label.all_posts},{value:"category",name:b.label.query_term_id},{value:"post_slug",name:b.label.slug_label}]}]);var x=b.create([{id:a.slug_id,type:"text","class":"large",
wrap_class:"tb_group_element_post_slug",help:b.label.slug_desc,label:b.label.slug_label}]);u.parentNode.insertBefore(r,u);u.parentNode.appendChild(x)}a.sticky_id!==h&&(u=b.create([{type:"toggle_switch",label:b.label.sticky_first,id:a.sticky_id,options:"simple",wrap_class:"tb_group_element_all"}]),t.parentNode.parentNode.appendChild(u));p.addEventListener("change",function(a){y.triggerEvent(d,"queryPosts",{val:q})},{passive:!0});null!==w&&clearTimeout(w);w=setTimeout(function(){b.callbacks()},2)}t.getElementsByClassName("query_category_multiple")[0].value=
q;!0===v||b.is_new?y.triggerEvent(d,"queryPosts",{val:q}):ThemifyConstructor.settings=m.Utils.clear(m.Forms.serialize("tb_options_setting"));v=!0}};c.cacheTerms[k]===h?t(d.parentNode,k,"terms").done(function(a){c.cacheTerms[k]=a;p()}):p()},z=0,A=q.length;z<A;++z)if(p[q[z]]){p.id=p[q[z]];p.label=b.label["query_"+q[z]];p.type="selectSearch";"term_id"===q[z]?(p.wrap_class="tb_search_term_wrap tb_group_element_category",p.class="query_category_single",p.help=b.label.query_desc,p.control={control_type:"queryPosts"}):
"tax_id"!==q[z]&&"tag_id"!==q[z]||p.term_id!==h||(p.control={control_type:"queryPosts"});delete p.description;delete p.after;var B=b.create([p]);!0===a.just_current&&delete p.wrap_class;(function(){var b="id"===q[z],d="term_id"===q[z]||"tag_id"===q[z],e=d?"":g[p.id],f=B.querySelector(".tb_search_input");f.addEventListener("selectElement",function(e){e=e.detail.val;var f=this.closest(".tb_field");d?(f.getElementsByClassName("query_category_multiple")[0].value=e,y.triggerEvent(this,"queryPosts",{val:e})):
null!==f.nextElementSibling?(f=f.nextElementSibling,b||!0!==v||a.slug_id===h||(f=f.nextElementSibling),null!==f&&(f=f.getElementsByClassName("tb_search_input")[0],b?c.cacheTypes[e]!==h&&(!0===a.just_current&&"tag"===g[a.tax_id]&&(g[a.tax_id]="post_tag"),n(f,g[a.tax_id],k(c.cacheTypes[e].options)),y.triggerEvent(f,"selectElement",{val:f.getAttribute("data-value")})):C(f,e))):b||y.triggerEvent(this,"queryPosts",{val:this.getAttribute("data-value")})},{passive:!0});if(b){var l=function(){e||(e="post");
n(f,e,k(c.cacheTypes));y.triggerEvent(f,"selectElement",{val:e});f=null};null===c.cacheTypes?t(f.parentNode,null,"post_types").done(function(b){c.cacheTypes=b;!0===a.just_current&&h==e&&(e=Object.keys(b));l()}):setTimeout(l,10)}else d&&!a.id&&a.taxonomy!==h&&C(f,a.taxonomy)})();r.appendChild(B)}d.parentNode.replaceChild(r,d);p=d=null})})();return d}},position_box:{w:null,h:null,update:function(a,b,c){c=A.Lightbox.$lightbox[0].querySelector("#"+a);null===c&&(c=A.Lightbox.$lightbox[0].querySelector('[data-input-id="'+
a+'"]'));if(null!==c){var d=c.closest(".tb_position_box_wrapper");a=d.getElementsByClassName("tb_position_box_handle")[0];d=d.getElementsByClassName("tb_position_box_label")[0];var e=this.getPreDefinedPositions();b?e[b]!==h&&(b=e[b]):b="50,50";c.value=b;d.textContent=this.getLabel(b);b=b.split(",");a.style.left=Math.ceil(b[0]*this.w/100)+"px";a.style.top=Math.ceil(b[1]*this.h/100)+"px"}},getLabel:function(a){switch(a){case "0,0":a="Top Left";break;case "50,0":a="Top Center";break;case "100,0":a="Top Right";
break;case "0,50":a="Center Left";break;case "50,50":a="Center Center";break;case "100,50":a="Center Right";break;case "0,100":a="Bottom Left";break;case "50,100":a="Bottom Center";break;case "100,100":a="Bottom Right";break;default:a=a.split(","),a=""===a[0]?"Center Center":"X:"+a[0]+"% Y:"+a[1]+"%"}return a},getPreDefinedPositions:function(){return{"right-top":"100,0","right-center":"100,50","right-bottom":"100,100","left-top":"0,0","left-center":"0,50","left-bottom":"0,100","center-top":"50,0",
"center-center":"50,50","center-bottom":"50,100"}},click:function(a){a.preventDefault();a.stopPropagation();var b=a.currentTarget.previousElementSibling;if(a.target.classList.contains("tb_position_item")){a=a.target.getAttribute("data-pos").split(",");var c=a[0];a=a[1];"50"===c?c=this.w/2:"100"===c&&(c=this.w);"50"===a?a=this.h/2:"100"===a&&(a=this.h)}else c=a.offsetX,a=a.offsetY;b.style.left=c+"px";b.style.top=a+"px";this.changeUpdate(b,c,a)},changeUpdate:function(a,b,c){b=+(b/this.w*100).toFixed(2);
c=+(c/this.h*100).toFixed(2);a=a.closest(".tb_position_box_wrapper").getElementsByClassName("tb_position_box_label")[0];var d=a.nextElementSibling;d.value=b+","+c;a.textContent=this.getLabel(b+","+c);y.triggerEvent(d,"change")},render:function(a,b){var c=this,d=this.getPreDefinedPositions(),e=b.getStyleVal(a.id),f=l.createElement("div"),g=l.createElement("div"),k=l.createElement("div"),n=l.createElement("div"),m=l.createElement("div"),p=b.hidden.render(a,b);f.className="tb_position_box_wrapper";g.className=
"tb_position_box_container";k.className="tb_position_box";n.className="tb_position_box_handle";m.className="tb_position_box_label";for(var w in d){var u=l.createElement("div"),x=l.createElement("span"),v=l.createElement("span"),y=d[w].split(",");x.className="themify_tooltip";v.textContent=w.replace("-"," ");u.className="tb_position_item";u.setAttribute("data-pos",d[w]);u.style.left=y[0]+"%";u.style.top=y[1]+"%";x.appendChild(v);u.appendChild(x);k.appendChild(u)}k.addEventListener("click",this.click.bind(this));
g.appendChild(n);g.appendChild(k);f.appendChild(g);a.after!==h&&f.appendChild(b.after(a));f.appendChild(m);f.appendChild(p);var z=function(d){var f=q(k);c.w=f.outerWidth();c.h=f.outerHeight();f=k=null;c.update(a.id,e,b);var g=null;r.jQuery.fn.draggable.call(q(d),{containment:"parent",scroll:!1,drag:function(a,b){null!==g&&clearTimeout(g);g=setTimeout(function(){c.changeUpdate(b.helper[0],b.position.left,b.position.top);clearTimeout(g);g=null},10)},stop:function(a,b){c.changeUpdate(b.helper[0],b.position.left,
b.position.top);null!==g&&(clearTimeout(g),g=null)}})};r.jQuery.fn.draggable===h?b.afterRun.push(function(a){r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/draggable.min.js",function(a){z(a)}.bind(null,a),tbLocalScript.version,null,function(){return r.jQuery.fn.draggable!==h})}.bind(null,n)):b.afterRun.push(function(a){z(a)}.bind(null,n));return f}},slider_range:{render:function(a,b){var c=l.createElement("div"),d=l.createElement("div"),e=b.hidden.render(a,b),f=0,g=100,k="%",n=!0,m=
1;a.options!==h&&(a.options.min!==h&&(f=a.options.min),a.options.max!==h&&(g=a.options.max),a.options.unit!==h&&(k=a.options.unit),a.options.range!==h&&(n=!1),a.options["default"]!==h&&(m=a.options["default"]));e.setAttribute("data-min",f);e.setAttribute("data-max",g);e.setAttribute("data-unit",k);f=g=k=null;c.className="tb_slider_wrapper input-range";d.className="range-slider";a.wrap_class!==h&&(c.className=" "+a.wrap_class);c.appendChild(d);c.appendChild(e);var p=function(a){var b=l.createElement("span"),
c=l.createElement("span"),d=parseFloat(e.getAttribute("data-min")),f=parseFloat(e.getAttribute("data-max")),g=e.getAttribute("data-unit"),k=e.value;k=n?k?k.split(","):[d,f]:k?k:m;b.className="tb_slider_label_l";c.className="tb_slider_label_u";d={range:n,min:d,max:f,slide:function(a,d){n?(b.textContent=d.values[0]+g,c.textContent=d.values[1]+g):b.textContent=d.value+g},create:function(a,d){a=this.getElementsByClassName("ui-slider-handle");n?(b.textContent=k[0]+g,a[0].appendChild(b),c.textContent=k[1]+
g,a[1].appendChild(c)):(b.textContent=k+g,a[0].appendChild(b));k=null},change:function(a,b){e.value=n?b.values[0]+","+b.values[1]:b.value}};n?d.values=k:d.value=k;r.jQuery.fn.slider.call(q(a),d)};r.jQuery.fn.slider===h?b.afterRun.push(function(a){r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/slider.min.js",function(a){p(a)}.bind(null,a),tbLocalScript.version,null,function(){return r.jQuery.fn.slider!==h})}.bind(null,d)):b.afterRun.push(function(a){p(a)}.bind(null,d));return c}},range:{update:function(a,
b,c){var d=A.Lightbox.$lightbox[0].querySelector("#"+a);null!==d&&(d.value=b!==h?b:"",b=a+"_unit",a=r.document.getElementById(b),null!==a&&"SELECT"===a.tagName&&(b=c.getStyleVal(b),b===h&&(b=a[0].value),a.value=b,this.setData(d,-1!==a.selectedIndex?a[a.selectedIndex]:a[0])))},setData:function(a,b){var c=b.getAttribute("data-min"),d=b.getAttribute("data-max");b=b.getAttribute("data-increment");var e=parseFloat(a.value.trim());if(e>parseFloat(d)||e<parseFloat(c))e=e>parseFloat(d)?d:c,a.value=0!==b%
1?parseFloat(e).toFixed(1):parseInt(e);a.setAttribute("min",c);a.setAttribute("max",d);a.setAttribute("step",b)},controlChange:function(a,b,c){function d(b){var c=a.getAttribute("step");if(c){var d=0!==c%1,e=parseFloat(a.getAttribute("max")),f=parseFloat(a.getAttribute("min")),g=a.value;g=d?parseFloat(g||0):parseInt(g||0);c=d?parseFloat(c):parseInt(c);a.value=+("increase"===b?g>=e?e:g+c:g<=f?f:g-c).toFixed(2)}}var e=b!==h&&"SELECT"===b.tagName,f=this;a.addEventListener("mousedown",function(b){if(1===
b.which){var e=b.pageY,f=this,g=a.value,h=function(a){a.pageY<e?d("increase"):a.pageY>e&&d("decrease");e=a.pageY;y.triggerEvent(f,c)};r.document.body.classList.add("tb_panel_resize");r.document.addEventListener("mousemove",h,{passive:!0});r.document.addEventListener("mouseup",function u(){r.document.removeEventListener("mousemove",h,{passive:!0});a.value!==g&&y.triggerEvent(f,c);m.hasChanged=!0;r.document.removeEventListener("mouseup",u,{once:!0,passive:!0});r.document.body.classList.remove("tb_panel_resize")},
{once:!0,passive:!0})}},{passive:!0});!0===e&&b.addEventListener("change",function(d){f.setData(a,b.options[b.selectedIndex]);y.triggerEvent(a,c)},{passive:!0});b!==h&&f.setData(a,e?-1!==b.selectedIndex?b[b.selectedIndex]:b[0]:b)},render:function(a,b){var c=l.createElement("div"),d=l.createElement("span"),e=l.createElement("input"),f=parseFloat(b.getStyleVal(a.id));c.className="tb_tooltip_container";a.wrap_class!==h&&(c.className=" "+a.wrap_class);d.className="tb_range_input";e.autocomplete="off";
e.type="number";e.className="tb_range";f!==h&&(e.value=f);!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id);a.class!==h&&(e.className+=" "+a.class);d.appendChild(e);a.tooltip!==h&&d.appendChild(b.tooltip(a.tooltip));c.appendChild(d);if(a.units===h)e.min=0,e.max=1500,e.step=1;else{d=l.createElement("div");var g=Object.keys(a.units);d.className="selectwrapper noborder";if(1<g.length){f=b.getStyleVal(a.id+
"_unit");var k=a.id+"_unit";g=l.createElement("select");g.className="tb_unit";!0===b.is_repeat?(g.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",g.dataset.inputId=k):(g.className+=" tb_lb_option",g.id=k);a.select_class!==h&&(g.className+=" "+a.select_class);for(var n in a.units){e.setAttribute("min",parseInt(a.units[n].min));e.setAttribute("max",parseInt(a.units[n].max));var m=l.createElement("option");m.value=n;m.textContent=n;m.dataset.min=a.units[n].min;m.dataset.max=a.units[n].max;
m.dataset.increment=a.units[n].increment!==h?a.units[n].increment:"em"===n||"em"===n?.1:1;f===n&&(m.selected=!0);g.appendChild(m)}b.initControl(g,{type:"select",id:k,control:a.control})}else n=g[0],e.setAttribute("min",parseFloat(a.units[n].min)),e.setAttribute("max",parseFloat(a.units[n].max)),e.setAttribute("step",a.units[n].increment!==h?parseFloat(a.units[n].increment):"1"),f<parseFloat(a.units[n].min)?e.value=a.units[n].min:f>parseFloat(a.units[n].max)&&(e.value=a.units[n].max),g=l.createElement("span"),
g.className="tb_unit",g.id=a.id+"_unit",g.dataset.min=a.units[n].min,g.dataset.max=a.units[n].max,g.dataset.increment=a.units[n].increment!==h?a.units[n].increment:"em"===n||"em"===n?.1:1,g.textContent=n;d.appendChild(g);c.appendChild(d)}a.after!==h&&c.appendChild(b.after(a.after));a.description!==h&&c.appendChild(b.description(a.description));f="styling"===b.clicked?"keyup":"change";!0===a.opposite&&g.addEventListener("change",function(a){a.stopPropagation();b.margin.changeUnit(this)},{passive:!0});
this.controlChange(e,g,f);g=q.extend({},a);!0===a.opposite&&e.addEventListener(f,function(a){a.stopPropagation();b.margin.changeOppositive(this)},{passive:!0});g.type="range";b.initControl(e,g);return c}},icon:{render:function(a,b){var c=l.createElement("div"),d=l.createElement("input"),e=l.createElement("span"),f=l.createElement("span"),g=b.getStyleVal(a.id);d.type="text";d.className="themify_field_icon";e.className="tb_plus_btn themify_fa_toggle icon-close";c.className="tb_icon_wrap";f.className=
"tb_clear_input";!0===b.is_repeat?(d.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);a.class!==h&&(d.className+=" "+a.class);g!==h?(d.value=g,g=m.Utils.getIcon(g),!1===g&&(g="default_icon"),e.className+=" "+g):e.className+=" default_icon";c.appendChild(b.initControl(d,a));c.appendChild(e);c.appendChild(f);return c}},createMarginPadding:function(a,b){var c=b.options!==h?b.options:[{id:"top",label:this.label.top},{id:"right",
label:this.label.right},{id:"bottom",label:this.label.bottom},{id:"left",label:this.label.left}],d=l.createDocumentFragment(),e=l.createElement("ul"),f=this,g=b.id,k="border_radius"===a,n=q.extend(!0,{},b);n.units={px:{min:"margin"===a?-1500:0,max:1500},em:{min:"margin"===a?-10:0,max:10},"%":{min:"margin"===a?-100:0,max:100}};n.prop=null;n.opposite=!0;e.className="tb_seperate_items tb_inline_list tb_has_opposite";!0===k&&e.setAttribute("data-toptext",c[0].label);a=0;for(var m=c.length;a<m;++a){var p=
l.createElement("li"),r=g+"_"+c[a].id;n.id=r;n.tooltip=c[a].label;n.class=b["class"]===h?"":b["class"];n.class+=" tb_multi_field tb_range_"+c[a].id;!0===k&&(n.class+=" tb_is_border_radius");var u=this.range.render(n,this);if(0!==a&&2!==a){var x=l.createElement("li"),v="right"===c[a].id?"top":c[a].id;x.className="tb_seperate_opposite tb_opposite_"+("bottom"===v?"top":v);x.appendChild(this.checkboxGenerate("checkbox",{id:g+"_opp_"+v,"class":"style_apply_oppositive",options:[{name:"1",value:""}],new_line:!1}));
v=x.querySelector(".style_apply_oppositive");var y=l.createElement("div");y.className="tb_oppositive_state";v.parentNode.insertBefore(y,v.nextSibling);v.addEventListener("change",function(a){a.stopPropagation();f.margin.bindingOppositive(this,!0)},{passive:!0});!0===v.checked&&f.afterRun.push(function(){f.margin.bindingOppositive(this)}.bind(v));d.appendChild(x)}p.appendChild(u);d.appendChild(p);!0===k?(p="border-","top"===c[a].id?p+="top-left-radius":"right"===c[a].id?p+="top-right-radius":"left"===
c[a].id?p+="bottom-left-radius":"bottom"===c[a].id&&(p+="bottom-right-radius")):p=b.prop+"-"+c[a].id;this.styles[r]={prop:p,selector:b.selector}}e.appendChild(d);n=null;d=l.createDocumentFragment();d.appendChild(e);if(4===m){d.appendChild(f.checkboxGenerate("icon_checkbox",{id:"checkbox_"+g+"_apply_all","class":"style_apply_all",options:[{name:"1",value:f.label.all,icon:'<span class="apply_all_checkbox_icon"></span>'}],"default":"module"===this.component&&!0===this.is_new||0===Object.keys(this.values).length?
"1":!1,new_line:!1}));var z=d.querySelector(".style_apply_all");z.addEventListener("change",function(a){f.margin.apply_all(this,!0)},{passive:!0});!0===z.checked&&f.afterRun.push(function(){f.margin.apply_all(z)})}return d},margin_opposity:{render:function(a,b){var c=["topId","bottomId"],d=l.createElement("ul"),e=q.extend(!0,{},a);d.className="tb_seperate_items tb_inline_list tb_has_opposite";for(var f=0;2>f;++f){var g=l.createElement("li");e.id=a[c[f]];e.prop="topId"===c[f]?"margin-top":"margin-bottom";
e.class="tb_multi_field tb_range_"+("topId"===c[f]?"top":"bottom");e.opposite=!0;e.tooltip="topId"===c[f]?b.label.top:b.label.bottom;g.appendChild(b.range.render(e,b));d.appendChild(g);if(0===f){g=l.createElement("li");g.className="tb_seperate_opposite tb_opposite_top";g.appendChild(b.checkboxGenerate("checkbox",{id:e.id+"_opp_top","class":"style_apply_oppositive",options:[{name:"1",value:""}],new_line:!1}));var k=g.querySelector(".style_apply_oppositive"),h=l.createElement("div");h.className="tb_oppositive_state";
k.parentNode.insertBefore(h,k.nextSibling);k.addEventListener("change",function(a){a.stopPropagation();b.margin.bindingOppositive(this,!0)},{passive:!0});d.appendChild(g)}b.styles[a[c[f]]]={prop:"topId"===c[f]?"margin-top":"margin-bottom",selector:a.selector}}return d}},margin:{bindingOppositive:function(a,b){var c=a.closest(".tb_seperate_opposite"),d=c.parentNode;c=!0===c.classList.contains("tb_opposite_left")?c.nextElementSibling:c.previousElementSibling;var e=!0===a.checked;a=this.getOppositiveDir(c.getElementsByClassName("tb_range")[0]);
d=d.getElementsByClassName("tb_range_"+a)[0];a=d.closest("li").getElementsByClassName("tb_unit")[0];if(!0===e){if(d.setAttribute("data-v",d.value),a.setAttribute("data-u",a.value),!0===b){e=c.getElementsByClassName("tb_range")[0];var f=e.value,g=d.value;""!==f||""===g?(d.value=f,a.value=c.getElementsByClassName("tb_unit")[0].value):(e.value=g,c.getElementsByClassName("tb_unit")[0].value=a.value)}}else f=d.getAttribute("data-v"),d.value=f===h||null===f?"":f,a.value=a.getAttribute("data-u");!0===b&&
y.triggerEvent(d,"keyup")},changeUnit:function(a){var b=a.closest(".tb_has_opposite");if(!b.hasAttribute("data-checked")){var c=r.document.getElementById(a.getAttribute("id").replace(/_unit$/ig,"")),d=this.getOppositiveDir(c);c=c.classList.contains("tb_is_border_radius");!0===b.getElementsByClassName("tb_opposite_"+("top"===d||!0===c&&"right"===d||!1===c&&"bottom"===d?"top":"left"))[0].getElementsByClassName("style_apply_oppositive")[0].checked&&(c=b.getElementsByClassName("tb_range_"+d)[0],c.closest("li").getElementsByClassName("tb_unit")[0].value=
a.value)}},getOppositiveDir:function(a){a=a.classList;var b=a.contains("tb_range_top")?"bottom":a.contains("tb_range_bottom")?"top":a.contains("tb_range_left")?"right":"left";a.contains("tb_is_border_radius")&&(b="bottom"===b?"right":"top"===b?"left":"left"===b?"top":"bottom");return b},changeOppositive:function(a){var b=a.closest("li").parentNode;if(!b.hasAttribute("data-checked")){var c=this.getOppositiveDir(a),d=a.classList.contains("tb_is_border_radius");!0===("top"===c||!0===d&&"right"===c||
!1===d&&"bottom"===c?b.getElementsByClassName("tb_opposite_top")[0]:b.getElementsByClassName("tb_opposite_left")[0]).getElementsByClassName("style_apply_oppositive")[0].checked&&(b.getElementsByClassName("tb_range_"+c)[0].value=a.value)}},apply_all:function(a,b){var c=a.closest(".tb_input").getElementsByClassName("tb_seperate_items")[0],d=c.getElementsByTagName("li")[0];!0===a.checked===!0?(c.setAttribute("data-checked",1),a=ThemifyConstructor.label.all):(c.removeAttribute("data-checked"),a=c.getAttribute("data-toptext"),
a||(a=ThemifyConstructor.label.top));!0===b&&y.triggerEvent(d.getElementsByClassName("tb_multi_field")[0],"keyup");d.getElementsByClassName("tb_tooltip_up")[0].textContent=a},update:function(a,b,c){b=["top","right","bottom","left"];for(var d="checkbox_"+a+"_apply_all",e=r.document.getElementById(d).getElementsByClassName("style_apply_all")[0],f=3;-1<f;--f){var g=a+"_"+b[f];if(null!==r.document.getElementById(g)&&(c.range.update(g,c.getStyleVal(g),c),!0!==e.checked)){g=a+"_opp_"+b[f];var k=r.document.getElementById(g);
null!==k&&(k.getElementsByClassName("style_apply_oppositive")[0].checked=c.getStyleVal(g)?!0:!1)}}c.checkbox.update(d,c.getStyleVal(d),c);this.apply_all(e)},render:function(a,b){return b.createMarginPadding(a.type,a)}},padding:{render:function(a,b){return b.createMarginPadding(a.type,a)}},box_shadow:{update:function(a,b,c){b=["hOffset","vOffset","blur","spread"];for(var d=3;-1<d;--d){var e=a+"_"+b[d];null!==r.document.getElementById(e)&&c.range.update(e,c.getStyleVal(e),c)}b=a+"_color";a+="_inset";
c.color.update(b,c.getStyleVal(b),c);c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){var c={hOffset:{label:b.label.h_o,units:{px:{min:-200,max:200},em:{min:0,max:10}}},vOffset:{label:b.label.v_o,units:{px:{min:-200,max:200},em:{min:0,max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}},spread:{label:b.label.spr,units:{px:{min:-200,max:200},em:{min:0,max:10}}}},d=l.createElement("ul"),e=a.id,f=q.extend(!0,{},a);f["class"]="tb_shadow_field";f.prop=null;d.className=
"tb_seperate_items tb_inline_list tb_shadow_inputs";for(var g in c)if(c[g]!==h){var k=c[g],n=l.createElement("li"),m=e+"_"+g;f.id=m;f.tooltip=k.label;f.units=k.units;f.selector=a.selector;n.appendChild(b.range.render(f,b));d.appendChild(n);b.styles[m]={prop:a.prop,selector:a.selector}}n=l.createElement("li");m=e+"_color";c={id:m,type:"color",class:f["class"],selector:a.selector};n.className="tb_shadow_color";b.styles[m]={prop:a.prop,selector:a.selector,type:"color"};n.appendChild(b.color.render(c,
b));d.appendChild(n);n=l.createElement("li");m=e+"_inset";e=b.checkboxGenerate("checkbox",{id:m,origID:e,type:"checkbox",class:f["class"],isBoxShadow:!0,prop:a.prop,options:[{value:b.label.in_sh,name:"inset"}]});b.styles[m]={prop:a.prop,selector:a.selector};n.className="tb_box_shadow_inset";n.appendChild(e);d.appendChild(n);return d}},text_shadow:{update:function(a,b,c){b=[c.label.h_sh,c.label.v_sh,c.label.bl];for(var d=2;-1<d;--d){var e=a+"_"+b[d];null!==r.document.getElementById(e)&&c.range.update(e,
c.getStyleVal(e),c)}a+="_color";c.color.update(a,c.getStyleVal(a),c)},render:function(a,b){var c={hShadow:{label:b.label.h_sh,units:{px:{min:-200,max:200},em:{min:0,max:10}}},vShadow:{label:b.label.v_sh,units:{px:{min:-200,max:200},em:{min:0,max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}}},d=l.createElement("ul"),e=a.id,f=q.extend(!0,{},a);f["class"]="tb_shadow_field";f.prop=null;d.className="tb_seperate_items tb_inline_list tb_shadow_inputs";for(var g in c)if(c.hasOwnProperty(g)){var k=
c[g],h=l.createElement("li"),m=e+"_"+g;f.id=m;f.tooltip=k.label;f.units=k.units;h.appendChild(b.range.render(f,b));d.appendChild(h);b.styles[m]={prop:a.prop,selector:a.selector}}h=l.createElement("li");m=e+"_color";c={id:m,type:"color",class:f["class"],selector:a.selector};h.className="tb_shadow_color";b.styles[m]={prop:a.prop,selector:a.selector,type:"color"};h.appendChild(b.color.render(c,b));d.appendChild(h);return d}},border_radius:{render:function(a,b){a.options=b.getOptions(a);return b.createMarginPadding(a.type,
a)}},border:{changeControl:function(a){var b=a.parentNode;a=a.value;for(var c=b.parentNode.children,d=c.length-1;-1<d;--d)c[d]!==b&&("none"===a?c[d].classList.add("_tb_hide_binding"):c[d].classList.remove("_tb_hide_binding"))},apply_all:function(a,b){var c=b.getElementsByTagName("input"),d=function(b,d){for(var e=c.length-1;0<e;--e){var f=c[e].parentNode;!0===b?f.classList.add("_tb_disable"):f.classList.remove("_tb_disable")}!0===b?a.dataset.checked=1:a.removeAttribute("data-checked");!0===d&&y.triggerEvent(a.children[0].getElementsByTagName("select")[0],
"change")};for(b=c.length-1;-1<b;--b)c[b].addEventListener("change",function(){d("all"===this.value,!0)},{passive:!0}),!0===c[b].checked&&"all"===c[b].value&&d(!0,null)},update:function(a,b,c){b=["top","right","bottom","left"];for(var d=a+"-type",e=0;4>e;++e){var f=a+"_"+b[e],g=f+"_color",k=f+"_style";f+="_width";c.color.update(g,c.getStyleVal(g),c);c.select.update(k,c.getStyleVal(k),c);this.changeControl(r.document.getElementById(k));c.range.update(f,c.getStyleVal(f),c)}c.radio.update(d,c.getStyleVal(d),
c)},render:function(a,b){var c=["top","right","bottom","left"],d=l.createElement("ul"),e=a.id,f=q.extend(!0,{},a),g=this,k=q.extend(!0,{},a);k.options=[{value:"all",name:b.label.all,"class":"style_apply_all",icon:'<i class="tic-border-all"></i>',label_class:"tb_radio_label_borders"}];k.option_js=!0;k.id=e+"-type";k.no_toggle=!0;k["default"]="top";k.prop=null;f.options=b.static.border;f.prop=null;d.className="tb_seperate_items tb_borders tb_group_element_border";for(var h=0;4>h;++h){var m=l.createElement("li"),
p=e+"_"+c[h];k.options.push({value:c[h],name:b.label[c[h]],icon:'<i class="tic-border-'+c[h]+'"></i>',label_class:"tb_radio_label_borders"});m.className="tb_group_element_"+c[h];"top"===c[h]&&(m.className+=" tb_group_element_all");b.styles[p+"_color"]={prop:"border-"+c[h],selector:a.selector};f.id=p+"_color";f.type="color";f.class="border_color";m.appendChild(b.color.render(f,b));b.styles[p+"_width"]={prop:"border-"+c[h],selector:a.selector};f.id=p+"_width";f.type="range";f.class="border_width";f.wrap_class=
"range_wrapper";f.units={px:{min:0,max:300}};m.appendChild(b.range.render(f,b));b.styles[p+"_style"]={prop:"border-"+c[h],selector:a.selector};f.id=p+"_style";f.type="select";f.class="border_style tb_multi_field";p=b.select.render(f,b);var r=p.querySelector("select");m.appendChild(p);d.appendChild(m);r.addEventListener("change",function(a){g.changeControl(this)},{passive:!0});"none"===r.value&&g.changeControl(r)}a=l.createDocumentFragment();a.appendChild(b.radioGenerate("icon_radio",k,b));g.apply_all(d,
a.querySelector("#"+k.id));a.appendChild(d);return a}},slider:{render:function(a,b){return b.create(b.getOptions(a))}},custom_css:{render:function(a,b){a.class="large";a.control=!1;a.help=b.label.custom_css_help;b=b.text.render(a,b);m.Utils.changeOptions(b.querySelector("#"+a.id),a.type);return b}},custom_css_id:{render:function(a,b){b=b.create([{id:"custom_css_id",type:"text",label:b.label.id_name,help:b.label.id_help,control:!1,"class":"large"}],b);m.Utils.changeOptions(b.querySelector("#custom_css_id"),
a.type);return b}},hidden:{render:function(a,b){var c=l.createElement("input"),d=b.getStyleVal(a.id);c.type="hidden";!0===b.is_repeat?(c.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",c.dataset.inputId=a.id):(c.className="tb_lb_option",c.id=a.id);a.class!==h&&(c.className+=" "+a.class);d!==h?c.value=d:a.value!==h&&(c.value=a.value);return b.initControl(c,a)}},frame:{render:function(a,b){a.options=b.static.frame;a.class="tb_frame";a.binding={not_empty:{show:["tb_frame_multi_wrap",
"tb_frame_color"]},empty:{hide:["tb_frame_multi_wrap","tb_frame_color"]}};return b.layout.render(a,b)}},title:{render:function(a,b){a.class="large";a.control={event:"keyup",control_type:"change",selector:".module-title"};return b.text.render(a,b)}},url:{render:function(a,b){a.input_type="url";return b.text.render(a,b)}},advacned_link:{render:function(a,b){return b.create([{id:"link",type:"radio",label:"l",wrap_class:" tb_compact_radios",link_to:!0,binding:{permalink:{show:["open_link"],hide:["custom_link"]},
custom:{show:["custom_link"],hide:["open_link"]},none:{hide:["custom_link","open_link","no_follow"]}}},{id:"custom_link",type:"url",label:"cl"},{id:"open_link",type:"radio",label:"o_l",link_type:!0,control:!1,wrap_class:" tb_compact_radios",binding:{lightbox:{show:["tb_t_m_lightbox"]},regular:{hide:["tb_t_m_lightbox"]},newtab:{hide:["tb_t_m_lightbox"]}}},{type:"multi",wrap_class:"tb_t_m_lightbox",label:"lg",options:[{id:"lightbox_w",type:"range",label:"w",control:!1,units:{px:{min:0,max:1E3},"%":{min:0,
max:100}}},{id:"lightbox_h",type:"range",label:"ht",control:!1,units:{px:{min:0,max:1E3},"%":{min:0,max:100}}}]}])}},button:{render:function(a,b){var c=l.createElement("button");c.className="builder_button";c.id=a.id;a.class!==h&&(c.className+=" "+a.class);c.textContent=a.name;return b.initControl(c,a)}},row_anchor:{render:function(a,b){a.control=!1;b=b.text.render(a,b);m.Utils.changeOptions(b.querySelector("#"+a.id),a.type);return b}},widget_form:{render:function(a,b){b=l.createElement("div");b.id=
a.id;b.className="module-widget-form-container wp-core-ui tb_lb_option";return b}},widget_select:{data:null,el:null,cache:[],mediaInit:null,textInit:null,render:function(a,b){var c=l.createDocumentFragment(),d=l.createElement("div"),e=l.createElement("i"),f=l.createElement("input"),g=l.createElement("div"),k=l.createElement("div");d.id="available-widgets-filter";e.className="fa fa-spin fa-spinner tb_loading_widgets";f.type="text";f.id="widgets-search";f.dataset.validation="not_empty";f.dataset.errorMsg=
b.label.widget_validate;f.autocomplete="off";f.placeholder=b.label.search_widget;g.id="available-widgets";g.tabIndex=1;k.id=a.id;k.className="tb_lb_option tb_widget_select";this.el=k;d.appendChild(e);d.appendChild(f);g.appendChild(k);c.appendChild(d);c.appendChild(g);var n=this,t=b.values[a.id],p=function(){var c=[],d=function(b,d){for(var e=c.length-1;-1<e;--e)c[e].classList.remove("selected");b.classList.add("selected");e=b.dataset.value;f.value=b.getElementsByClassName("widget-title")[0].textContent;
g.style.display="none";n.select(e,n.data[e].b,d,a)},p;for(p in n.data){var q=l.createElement("div"),r=l.createElement("div"),w=l.createElement("h3");q.className="widget-tpl "+n.data[p].b;q.dataset.value=p;r.className="widget-title";w.textContent=n.data[p].n;r.appendChild(w);q.appendChild(r);q.addEventListener("click",function(c){c.preventDefault();c.stopPropagation();b.settings[a.id]=this.dataset.value;d(this,null)});c.push(q);n.data[p].d!==h&&(r=l.createElement("div"),r.className="widget-description",
r.innerHTML=n.data[p].d,q.appendChild(r));k.appendChild(q);t===p&&d(q,b.values.instance_widget)}t||new SimpleBar(k);n.search(f,g);e.parentNode.removeChild(e);e=null;m.hasChanged=!0};if(null===n.data){q.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_widget_items",nonce:themifyBuilder.tb_load_nonce},success:function(a){n.data=a;p()}});for(var w in themifyBuilder.widget_css)r.Themify.LoadCss(themifyBuilder.widget_css[w],tbLocalScript.version);themifyBuilder.widget_css=
null}else setTimeout(p,5);return c},search:function(a,b){var c=this;a.addEventListener("focus",this.show.bind(this),{passive:!0});a.addEventListener("blur",function(a){a.relatedTarget&&"available-widgets"===a.relatedTarget.id||(b.style.display="none")},{passive:!0});a.addEventListener("keyup",function(a){c.show();a=this.value.trim();for(var b=new RegExp(a,"i"),d=c.el.getElementsByClassName("widget-tpl"),g=0,k=d.length;g<k;++g)if(""===a)d[g].style.display="block";else{var h=d[g].getElementsByTagName("h3")[0];
h=h.textContent||h.innerText;b.test(h)?d[g].style.display="block":d[g].style.display="none"}},{passive:!0})},show:function(){this.el.closest("#available-widgets").style.display="block"},hide:function(){this.el.closest("#available-widgets").style.display="none"},select:function(a,b,c,d){var e=this,f=q("#instance_widget",A.Lightbox.$lightbox),g=function(g){var k=function(){var k=q(g.form);f.addClass("open").html(k.html());if(c)for(var h in c)k.find('[name="'+h+'"]').val(c[h]);k=null;"text"===b?wp.textWidgets&&
(e.textInit||(e.textInit=!0,wp.textWidgets.init()),c&&delete wp.textWidgets.widgetControls[c["widget-id"]]):wp.mediaWidgets&&(e.mediaInit||(wp.mediaWidgets.init(),e.mediaInit=!0),c&&delete wp.mediaWidgets.widgetControls[c["widget-id"]]);q(l).trigger("widget-added",[f]);"text"===b&&ThemifyConstructor.initControl(f.find(".wp-editor-area")[0],{control:{control_type:"wp_editor",type:"refresh"}});c&&setTimeout(function(){new SimpleBar(r.document.getElementById("tb_options_setting"));new SimpleBar(e.el)},
100);if("visual"===m.mode){var n=q.extend(!0,{},d);n.id=f[0].id;f.on("change",":input",function(){!1===m.is_ajax_call&&ThemifyConstructor.control.widget_select(f,n)});a&&ThemifyConstructor.control.widget_select(f,n)}f.removeClass("tb_loading_widgets_form").find("select").wrap('<span class="selectwrapper"/>')},t=function(a,b){var c=a.length;(function(a,b){y.LoadAsync(a,b,g.v)})(a[b].src,function(){if(a[b].extra&&a[b].extra.after){var d=a[b].extra.after,e="";if("object"===typeof d)for(var f in d)d[f]&&
(e+=d[f]);""!==e&&(d=l.createElement("script"),d.type="text/javascript",d.text=e,e=l.getElementsByTagName("script")[0],e.parentNode.insertBefore(d,e))}++b;b<c?t(a,b):k()})};e.cache[b]===h?(g.template&&l.body.insertAdjacentHTML("beforeend",g.template),0<g.src.length?t(g.src,0):k()):k()};f.addClass("tb_loading_widgets_form").html('<i class="fa fa-refresh fa-spin"></i>');c&&q.each(c,function(a,b){var d=a.match(/.*\[\d\]\[(.*)\]/);q.isArray(d)&&"undefined"!==d[1]&&(delete c[a],c[d[1]]=b)});q.ajax({type:"POST",
dataType:"json",url:themifyBuilder.ajaxurl,data:{action:"module_widget_get_form",tb_load_nonce:themifyBuilder.tb_load_nonce,load_class:a,tpl_loaded:1===e.cache[b]?1:0,id_base:b,widget_instance:c},success:function(a){a&&a.form&&(g(a),e.cache[b]=1)}})}},message:{render:function(a,b){b=l.createElement("div");a.class!==h&&(b.className+=a.class);b.innerHTML=a.comment;return b}},filters:{render:function(a,b){var c={hue:{label:b.label.hue,units:{deg:{min:0,max:360}},prop:"hue-rotate"},saturation:{label:b.label.sat,
units:{"%":{min:0,max:200}},prop:"saturate"},brightness:{label:b.label.bri,units:{"%":{min:0,max:200}},prop:"brightness"},contrast:{label:b.label.con,units:{"%":{min:0,max:200}},prop:"contrast"},invert:{label:b.label.inv,units:{"%":{min:0,max:100}},prop:"invert"},sepia:{label:b.label.se,units:{"%":{min:0,max:100}},prop:"sepia"},opacity:{label:b.label.op,units:{"%":{min:0,max:100}},prop:"opacity"},blur:{label:b.label.bl,units:{px:{min:0,max:50}},prop:"blur"}},d=l.createElement("ul"),e=a.id,f=q.extend(!0,
{},a);f["class"]="tb_filters_field";f.prop=null;d.className="tb_seperate_items tb_filters_fields";for(var g in c)if(c[g]!==h){var k=c[g],n=l.createElement("li"),m=e+"_"+g;f.id=m;f.units=k.units;f.selector=a.selector;var p=l.createElement("div"),r=l.createElement("span");p.className="tb_label";r.className="tb_label_text";r.textContent=k.label;p.appendChild(r);n.appendChild(p);n.appendChild(b.range.render(f,b));d.appendChild(n);b.styles[m]={prop:k.prop,selector:a.selector}}return d}},help:function(a){var b=
l.createElement("div"),c=l.createElement("div"),d=l.createElement("i");b.className="tb_help";d.className="icon ti-help";c.className="tb_help_content";d.tabIndex=-1;c.innerHTML=a;b.appendChild(d);b.appendChild(c);return b},tooltip:function(a){var b=l.createElement("span");b.className="tb_tooltip_up";b.textContent=a;return b},description:function(a){var b=l.createElement("small");b.innerHTML=a;return b},after:function(a){var b=l.createElement("span");b.className="tb_input_after";b.textContent=a.after;
a.label!==h&&""!==a.label||a.help===h||""===a.help||b.appendChild(this.help(a.help));return b},height:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isHeight=!0;var c=l.createDocumentFragment(),d=q.extend(!0,{},a);d.label="ht";d.type="range";d.id=a.id;d.prop="height";d.wrap_class="tb_group_element_"+a.id+"_height tb_inline_list";d.units={px:{min:0,max:1200},vh:{min:0,max:100},"%":{min:0,max:100},em:{min:0,max:200}};b.range.render(d,b);b.styles[a.id]={prop:"height",
selector:a.selector};b.styles[a.id+"_auto_height"]={prop:"height",selector:a.selector};c.appendChild(b.range.render(d,b));c.appendChild(b.checkboxGenerate("checkbox",{id:a.id+"_auto_height",heightID:a.id,type:"checkbox",isHeight:!0,wrap_checkbox:"tb_inline_list",prop:"height",binding:{checked:{hide:["tb_group_element_ht_height"]},not_checked:{show:["tb_group_element_ht_height"]}},options:[{value:b.label.a_ht,name:"auto"}]}));return c}},toggle_switch:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),
c)},controlChange:function(a,b){a.addEventListener("change",function(){this.value=!0===this.checked?b.on.name:b.off!==h?b.off.name:"";"visibility"===ThemifyConstructor.clicked&&null!==m.activeModel&&m.Utils.visibilityLabel(y.body[0].querySelector("[data-cid="+m.activeModel.cid+"]"),m.Forms.serialize("tb_options_visibility"))},{passive:!0})},render:function(a,b){var c=q.extend(!0,{},a),d={},e=l.createElement("div"),f="off",g=b.getStyleVal(a.id);c.control=!1;c["class"]=c["class"]===h?"toggle_switch":
c["class"]+" toggle_switch";var k=c.options;if(k===h||"simple"===k)"simple"===k?k={on:{name:"yes",value:b.label.y},off:{name:"no",value:b.label.no}}:(k={on:{name:"no",value:b.label.s},off:{name:"yes",value:b.label.hi}},c["default"]===h&&(c["default"]="on"));g===h?("on"===c["default"]&&(f="on"),g="on"===f?k.on.name:k.off!==h?k.off.name:""):(!1===g&&(g=""),f=k.on.name===g?"on":"off");for(var n in k)c.after===h&&k[n].value!==h&&e.setAttribute("data-"+n,b.label[k[n].value]!==h?b.label[k[n].value]:k[n].value),
d[n]=k[n];n=Object.keys(k)[0];delete c.binding;delete k[n].value;delete c["default"];c.options=[k[n]];c.wrap_checkbox===h&&(c.wrap_checkbox="");c.wrap_checkbox+=" tb_switcher";e.className="switch_label";c=b.checkboxGenerate("checkbox",c);k=c.querySelector(".toggle_switch");k.value=g;k.checked="on"===f;this.controlChange(k,d);k.parentNode.appendChild(e);b.initControl(k,a);return c}},width:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isWidth=!0;var c={id:a.id+
"_auto_width",widthID:a.id,type:"checkbox",isWidth:!0,prop:"width",options:[{value:b.label.a_wd,name:"auto"}]};b.styles[a.id+"_auto_width"]={prop:"width",selector:a.selector};var d=b.checkboxGenerate("checkbox",c),e=d.querySelector(".tb_lb_option");c=d.querySelector("input");var f=q.extend(!0,{},a);c.addEventListener("change",function(b){var c=r.document.getElementsByClassName("tb_group_element_"+a.id+"_width")[0];b.target.checked?c.classList.add("hide-auto-height"):c.classList.remove("hide-auto-height")});
f.label="w";f.type="range";f.id=a.id;f.prop="width";f.wrap_class="tb_group_element_"+a.id+"_width";"auto"===b.values[a.id+"_auto_width"]&&(f.wrap_class+=" hide-auto-height");f.units={px:{min:-2E3,max:2E3},"%":{min:0,max:100,increment:1},em:{min:-20,max:20}};var g=b.create([f]);f.wrap_class="";f.label="mi_wd";f.id="min_"+a.id;f.prop="min-width";var k=b.create([f]);b.styles[f.id]={prop:f.prop,selector:a.selector};f.label="ma_wd";f.id="max_"+a.id;f.prop="max-width";var h=b.create([f]);b.styles[f.id]=
{prop:f.prop,selector:a.selector};f=c=null;b.afterRun.push(function(){var a=e.parentNode.closest(".tb_field");a.parentNode.insertBefore(g,a);a.parentNode.insertBefore(h,a.nextSibling);a.parentNode.insertBefore(k,a.nextSibling);g=k=h=e=null});return d}},position:{render:function(a,b){var c={top:b.label.top,right:b.label.right,bottom:b.label.bottom,left:b.label.left},d=l.createElement("ul"),e=l.createDocumentFragment(),f=a.id,g=q.extend(!0,{},a),k=q.extend(!0,{},a);k.options=[];k.option_js=!0;k.id=
f+"-type";k.no_toggle=!0;k["default"]="top";k.prop=null;d.className="tb_seperate_items tb_group_element_position";c=Object.keys(c);for(var h=0;4>h;++h){var m=l.createElement("li"),p=f+"_"+c[h];k.options.push({value:c[h],name:b.label[c[h]],icon:'<i class="tic-border-'+c[h]+'"></i>',label_class:"tb_radio_label_borders"});m.className="tb_group_element_"+c[h];b.styles[p]={prop:c[h],selector:a.selector};g.id=p;g.type="range";g.prop="position";g.wrap_class="range_wrapper "+f+"_"+c[h];g.units={px:{min:-2E3,
max:2E3},"%":{min:0,max:100}};m.appendChild(b.range.render(g,b));b.styles[p+"_auto"]={prop:"position",selector:a.selector};m.appendChild(b.checkboxGenerate("checkbox",{id:p+"_auto",is_position:!0,posId:p,prop:c[h],type:"checkbox",selector:a.selector,options:[{name:"auto",value:b.label.auto}],wrap_checkbox:"tb_inline_list",binding:{checked:{hide:[f+"_"+c[h]]},not_checked:{show:[f+"_"+c[h]]}}}));e.appendChild(m)}m=l.createElement("li");m.appendChild(b.radioGenerate("icon_radio",k,b));d.insertBefore(m,
d.childNodes[0]);d.appendChild(e);c=l.createDocumentFragment();b.styles[f]={prop:"position",selector:a.selector};g.id=f;g.binding={empty:{hide:["tb_group_element_position"]},absolute:{show:["tb_group_element_position"]},fixed:{show:["tb_group_element_position"]},relative:{hide:["tb_group_element_position"]},"static":{hide:["tb_group_element_position"]}};g.type="select";g.prop="position";g.options={"":"",absolute:b.label.abs,fixed:b.label.fi,relative:b.label.re,"static":b.label.st};g.class="tb_position_field tb_multi_field";
c.appendChild(b.select.render(g,b));c.appendChild(d);return c}}}})(jQuery,Themify,window.top,document,void 0);
