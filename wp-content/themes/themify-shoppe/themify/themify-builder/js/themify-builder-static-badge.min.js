'use strict';(function(e,k,g){g=wp.media;var c="",h=[/\x3c!--themify_builder_static--\x3e([\s\S]*?)\x3c!--\/themify_builder_static--\x3e/gi,/&lt;!--themify_builder_static--&gt;([\s\S]*?)&lt;!--\/themify_builder_static--&gt;/gi,/&amp;lt;!--themify_builder_static--&amp;gt;([\s\S]*?)&amp;lt;!--\/themify_builder_static--&amp;gt;/gi];wp.mce.views.register("tb_static_badge",{template:g.template("tb-static-badge"),bindNode:function(a,b){e(b).on("click",".tb_mce_view_frontend_btn",this.goToFront).on("click",
".tb_mce_view_backend_btn",this.goToBack)},getContent:function(){return this.template({})},match:function(a){if(a=wp.mce.views._tb_static_content.isMatch(a))return{index:a.index,content:a[0],options:{}}},View:{className:"tb_static_badge",template:g.template("tb-static-badge"),getHtml:function(){return this.template({})}},edit:function(a){this.goToFront()},goToFront:function(){e("#tb_switch_frontend").trigger("click")},goToBack:function(){tb_app._backendBuilderFocus()},contentPlaceholder:function(a){c=
c||a;return"\x3c!--themify_builder_static--\x3e\x3c!--/themify_builder_static--\x3e"+(59<a.length?" ".repeat(a.length-59):"")}});wp.mce.views._tb_static_content={setContent:function(a,b){tinyMCE&&tinyMCE.activeEditor?tinyMCE.activeEditor.hidden?e("#content").val(b):a.setContent(b):a.val(b)},isMatch:function(a){return h[0].exec(a)||h[1].exec(a)||h[2].exec(a)}};e(document).on("tinymce-editor-init",function(a,b){if(b.wp&&b.wp._createToolbar)var d=b.wp._createToolbar(["wp_view_edit"]);if(d)b.on("wptoolbar",
function(a){b.dom.hasClass(a.element,"wpview")&&"tb_static_badge"===b.dom.getAttrib(a.element,"data-wpview-type")&&(a.toolbar=d)});b.setContent(wp.mce.views.setMarkers(b.getContent()));b.on("beforesetcontent",function(a){a.content=wp.mce.views.setMarkers(a.content)})});e("body").on("themify_builder_save_data",function(a,b,d){if(themifyBuilder.is_gutenberg_editor||k.isEmpty(b.data.static_content))return!0;if(tinyMCE&&tinyMCE.activeEditor){a=tinyMCE.activeEditor;d=!1===tinyMCE.activeEditor.hidden?tinyMCE.activeEditor.getContent():
tinymce.DOM.get("content").value;var c=wp.mce.views._tb_static_content.isMatch(d)}else a=e("#content"),d=a.val(),c=wp.mce.views._tb_static_content.isMatch(d);k.isNull(c)?wp.mce.views._tb_static_content.setContent(a,d+b.data.static_content):wp.mce.views._tb_static_content.setContent(a,d.replace(c[0],b.data.static_content))});var f={timeout:void 0,init:function(){e(window).on("YoastSEO:ready",function(){f.load()})},load:function(){themifyBuilder.is_gutenberg_editor&&(c=wp.data.select("core/editor").getCurrentPost().builder_content);
YoastSEO.app.registerPlugin("TBuilderReader",{status:"loading"});YoastSEO.app.pluginReady("TBuilderReader");YoastSEO.app.registerModification("content",f.readContent,"TBuilderReader",5);f.update()},readContent:function(a){c&&(a=themifyBuilder.is_gutenberg_editor?a+" "+c:a.replace("\x3c!--themify_builder_static--\x3e\x3c!--/themify_builder_static--\x3e",c).replace(/(\r\n|\n|\r)/gm,""));return a},update:function(){clearTimeout(f.timeout);f.timeout=setTimeout(function(){YoastSEO.app.refresh()},250)}};
f.init()})(jQuery,_,Backbone);
